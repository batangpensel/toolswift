<!DOCTYPE html>
<html lang="en" class="dark scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF Tools: Merge, Split, Compress • UtilityKit</title>
  <meta name="description" content="Merge, split, compress & convert PDFs online for free. Fast, secure, no watermarks.">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "UtilityKit PDF Tools",
    "url": "https://utilitykit.xyz/pdf.html",
    "applicationCategory": "UtilitiesApplication",
    "operatingSystem": "Any",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "description": "Free online PDF Imager Merger, Splitter, and Compressor.",
    "featureList": "PDF Merge, PDF Split, PDF Compress"
  }
  </script>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2884780611077861" crossorigin="anonymous"></script>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
  <script src="https://unpkg.com/sortablejs@1.15.0/Sortable.min.js"></script>
  <script src="https://unpkg.com/downloadjs@1.4.8/download.min.js"></script>

  <style>
    /* Scrollbar & Utils */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .copy-feedback { opacity: 0; transition: opacity 0.4s; }
    .copy-feedback.show { opacity: 1; }

    /* Animations */
    .rotate-animation {
      transition: transform 0.45s cubic-bezier(0.34, 1.56, 0.64, 1);
      transform-style: preserve-3d;
    }
    .drag-over { border-color: #8b5cf6 !important; background: rgba(139,92,246,0.1); }
    .thumbnail:hover { transform: translateY(-8px) scale(1.03); }
    .rotate-btn:hover { transform: scale(1.2); background: rgba(255,255,255,0.3) !important; }
    
    /* Mobile Menu Animation */
    #mobile-menu {
        transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
        max-height: 0;
        opacity: 0;
        overflow: hidden;
    }
    #mobile-menu.open {
        max-height: 800px;
        opacity: 1;
    }
    
    /* Dropdown Animation */
    .group:hover .group-hover\:visible {
        visibility: visible;
        opacity: 1;
        transform: translateY(0);
    }
  </style>
</head>

<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 dark:from-slate-950 dark:to-slate-900 min-h-screen flex flex-col font-sans">

  <header class="bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl shadow-sm sticky top-0 z-50 border-b border-slate-200 dark:border-slate-800">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        
        <a href="index.html" class="flex items-center gap-2 group min-w-max">
          <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-1.5 rounded-lg shadow-lg group-hover:scale-110 transition-transform">
            <i class="fa-solid fa-layer-group text-lg"></i>
          </div>
          <span class="text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 tracking-tight">
            UtilityKit
          </span>
        </a>

        <nav class="hidden md:flex items-center gap-4">
            
            <div class="relative group">
                <button class="flex items-center gap-2 px-4 py-2 text-slate-600 dark:text-slate-300 font-bold hover:text-blue-600 dark:hover:text-blue-400 transition">
                    <i class="fa-solid fa-toolbox"></i>
                    <span>Tools</span>
                    <i class="fa-solid fa-chevron-down text-xs transition-transform group-hover:rotate-180 duration-200"></i>
                </button>
                
                <div class="absolute top-full right-0 mt-2 w-[360px] bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-100 dark:border-slate-700 opacity-0 invisible group-hover:visible transition-all duration-200 transform translate-y-2 z-50 overflow-hidden">
                    <div class="p-4 grid grid-cols-2 gap-2">
                         <a href="pdf.html" class="flex items-center gap-3 p-3 rounded-xl hover:bg-blue-50 dark:hover:bg-slate-700/50 transition group/item">
                            <div class="w-8 h-8 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-500 group-hover/item:scale-110 transition-transform">
                                <i class="fa-solid fa-file-pdf"></i>
                            </div>
                            <span class="text-sm font-medium text-slate-700 dark:text-slate-200">PDF Tools</span>
                        </a>
                        
                        <a href="image.html" class="flex items-center gap-3 p-3 rounded-xl hover:bg-purple-50 dark:hover:bg-slate-700/50 transition group/item">
                            <div class="w-8 h-8 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-500 group-hover/item:scale-110 transition-transform">
                                <i class="fa-solid fa-image"></i>
                            </div>
                            <span class="text-sm font-medium text-slate-700 dark:text-slate-200">Image Tools</span>
                        </a>

                        <a href="qr.html" class="flex items-center gap-3 p-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700/50 transition group/item">
                            <div class="w-8 h-8 rounded-lg bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-slate-600 dark:text-slate-300 group-hover/item:scale-110 transition-transform">
                                <i class="fa-solid fa-qrcode"></i>
                            </div>
                            <span class="text-sm font-medium text-slate-700 dark:text-slate-200">QR Code</span>
                        </a>

                        <a href="ocr.html" class="flex items-center gap-3 p-3 rounded-xl hover:bg-teal-50 dark:hover:bg-slate-700/50 transition group/item">
                            <div class="w-8 h-8 rounded-lg bg-teal-100 dark:bg-teal-900/30 flex items-center justify-center text-teal-500 group-hover/item:scale-110 transition-transform">
                                <i class="fa-solid fa-eye"></i>
                            </div>
                            <span class="text-sm font-medium text-slate-700 dark:text-slate-200">OCR</span>
                        </a>
                        
                         <a href="calculator.html" class="flex items-center gap-3 p-3 rounded-xl hover:bg-orange-50 dark:hover:bg-slate-700/50 transition group/item">
                            <div class="w-8 h-8 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-500 group-hover/item:scale-110 transition-transform">
                                <i class="fa-solid fa-calculator"></i>
                            </div>
                            <span class="text-sm font-medium text-slate-700 dark:text-slate-200">Calculator</span>
                        </a>
                        
                        <a href="password.html" class="flex items-center gap-3 p-3 rounded-xl hover:bg-yellow-50 dark:hover:bg-slate-700/50 transition group/item">
                            <div class="w-8 h-8 rounded-lg bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center text-yellow-500 group-hover/item:scale-110 transition-transform">
                                <i class="fa-solid fa-key"></i>
                            </div>
                            <span class="text-sm font-medium text-slate-700 dark:text-slate-200">Password</span>
                        </a>
                        
                        <a href="json.html" class="flex items-center gap-3 p-3 rounded-xl hover:bg-blue-50 dark:hover:bg-slate-700/50 transition group/item">
                            <div class="w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-500 group-hover/item:scale-110 transition-transform">
                                <i class="fa-solid fa-code"></i>
                            </div>
                            <span class="text-sm font-medium text-slate-700 dark:text-slate-200">JSON</span>
                        </a>
                        
                         <a href="compress.html" class="flex items-center gap-3 p-3 rounded-xl hover:bg-indigo-50 dark:hover:bg-slate-700/50 transition group/item">
                            <div class="w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-500 group-hover/item:scale-110 transition-transform">
                                <i class="fa-solid fa-file-zipper"></i>
                            </div>
                            <span class="text-sm font-medium text-slate-700 dark:text-slate-200">Compress</span>
                        </a>
                        
                         <a href="base64.html" class="flex items-center gap-3 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-slate-700/50 transition group/item">
                            <div class="w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-gray-500 group-hover/item:scale-110 transition-transform">
                                <i class="fa-solid fa-lock"></i>
                            </div>
                            <span class="text-sm font-medium text-slate-700 dark:text-slate-200">Base64</span>
                        </a>
                        
                        <a href="timestamp.html" class="flex items-center gap-3 p-3 rounded-xl hover:bg-green-50 dark:hover:bg-slate-700/50 transition group/item">
                            <div class="w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-500 group-hover/item:scale-110 transition-transform">
                                <i class="fa-solid fa-clock"></i>
                            </div>
                            <span class="text-sm font-medium text-slate-700 dark:text-slate-200">Timestamp</span>
                        </a>
                    </div>
                </div>
            </div>

            <a href="articles.html" class="px-4 py-2 rounded-lg text-slate-600 dark:text-slate-300 font-bold hover:bg-blue-50 dark:hover:bg-slate-800 hover:text-blue-600 transition">
                Articles
            </a>
        </nav>

        <button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition focus:outline-none">
          <i class="fa-solid fa-bars text-2xl"></i>
        </button>
      </div>

      <div id="mobile-menu" class="md:hidden border-t border-slate-100 dark:border-slate-800">
        <div class="py-4 space-y-4">
             <a href="article.html" class="flex items-center justify-center gap-2 w-full p-3 rounded-xl bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 font-bold transition">
                <i class="fa-solid fa-newspaper"></i> Articles
            </a>

            <div class="px-2">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 ml-1">All Tools</h3>
                <nav class="grid grid-cols-2 gap-2">
                    <a href="pdf.html" class="flex flex-col items-center justify-center p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 hover:bg-blue-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 transition">
                        <i class="fa-solid fa-file-pdf text-2xl text-red-500 mb-1"></i>
                        <span class="text-xs font-medium">PDF</span>
                    </a>
                    <a href="image.html" class="flex flex-col items-center justify-center p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 hover:bg-blue-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 transition">
                        <i class="fa-solid fa-image text-2xl text-purple-500 mb-1"></i>
                        <span class="text-xs font-medium">Image</span>
                    </a>
                    <a href="qr.html" class="flex flex-col items-center justify-center p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 hover:bg-blue-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 transition">
                        <i class="fa-solid fa-qrcode text-2xl text-slate-500 mb-1"></i>
                        <span class="text-xs font-medium">QR</span>
                    </a>
                    <a href="ocr.html" class="flex flex-col items-center justify-center p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 hover:bg-blue-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 transition">
                        <i class="fa-solid fa-eye text-2xl text-teal-500 mb-1"></i>
                        <span class="text-xs font-medium">OCR</span>
                    </a>
                    <a href="calculator.html" class="flex flex-col items-center justify-center p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 hover:bg-blue-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 transition">
                        <i class="fa-solid fa-calculator text-2xl text-orange-500 mb-1"></i>
                        <span class="text-xs font-medium">Calc</span>
                    </a>
                    <a href="password.html" class="flex flex-col items-center justify-center p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 hover:bg-blue-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 transition">
                        <i class="fa-solid fa-key text-2xl text-yellow-500 mb-1"></i>
                        <span class="text-xs font-medium">Pass</span>
                    </a>
                    <a href="json.html" class="flex flex-col items-center justify-center p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 hover:bg-blue-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 transition">
                        <i class="fa-solid fa-code text-2xl text-blue-500 mb-1"></i>
                        <span class="text-xs font-medium">JSON</span>
                    </a>
                    <a href="compress.html" class="flex flex-col items-center justify-center p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 hover:bg-blue-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200 transition">
                        <i class="fa-solid fa-file-zipper text-2xl text-indigo-500 mb-1"></i>
                        <span class="text-xs font-medium">Compress</span>
                    </a>
                </nav>
            </div>
        </div>
      </div>
    </div>
  </header>

  <div id="root" class="flex-grow max-w-5xl mx-auto p-6 pt-12 w-full"></div>

  <footer class="bg-slate-900 text-white mt-16 border-t border-slate-700">
    <div class="container mx-auto px-6 py-12 max-w-7xl">
      <div class="grid grid-cols-2 md:grid-cols-5 gap-8 border-b border-slate-800 pb-8 mb-8">
        <div>
          <h4 class="text-lg font-bold mb-4 text-indigo-400">UtilityKit</h4>
          <ul class="space-y-2 text-sm text-slate-400">
            <li><a href="about_us.html" class="hover:text-white transition">About Us</a></li>
            <li><a href="articles.html" class="hover:text-white transition">Articles & Guides</a></li>
            <li><a href="contact_us.html" class="hover:text-white transition">Contact Support</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="text-lg font-bold mb-4 text-indigo-400">Image Tools</h4>
          <ul class="space-y-2 text-sm text-slate-400">
            <li><a href="image.html" class="hover:text-white transition">Image Converter</a></li>
            <li><a href="compress.html" class="hover:text-white transition">Image Compressor</a></li>
            <li><a href="ocr.html" class="hover:text-white transition">Image OCR</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="text-lg font-bold mb-4 text-indigo-400">Data Tools</h4>
          <ul class="space-y-2 text-sm text-slate-400">
            <li><a href="json.html" class="hover:text-white transition">JSON Formatter</a></li>
            <li><a href="base64.html" class="hover:text-white transition">Base64 Encoder</a></li>
            <li><a href="timestamp.html" class="hover:text-white transition">Timestamp Converter</a></li>
          </ul>
        </div>
        
        <div class="col-span-2 md:col-span-1">
          <h4 class="text-lg font-bold mb-4 text-red-400">Legal</h4>
          <ul class="space-y-2 text-sm text-slate-400">
            <li><a href="privacy_policy.html" class="hover:text-white transition">Privacy Policy</a></li>
            <li><a href="terms_of_service.html" class="hover:text-white transition">Terms of Service</a></li>
            <li><a href="disclaimer.html" class="hover:text-white transition text-white font-bold">Disclaimer</a></li>
          </ul>
        </div>
      </div>
      
      <div class="text-center text-slate-500 text-sm">
        <p>&copy; 2025 UtilityKit. All rights reserved. | <span class="font-semibold text-teal-400">Powered by client-side technology for your privacy.</span></p>
      </div>
    </div>
  </footer>

<script type="text/babel">
const { useState, useRef, useEffect } = React;
const { PDFDocument, PageSizes, degrees } = PDFLib;

const formatBytes = (b) => b ? `${(b / 1024 / 1024).toFixed(2)} MB` : '0 MB';

const App = () => {
  const [items, setItems] = useState([]); 
  const [isDragging, setIsDragging] = useState(false);
  const [isMerging, setIsMerging] = useState(false);
  const [error, setError] = useState("");
  const listRef = useRef();
  const fileInputRef = useRef();

  // Helper to handle file downloads manually if downloadjs fails
  const saveFile = (data, fileName, mimeType) => {
    if (window.download) {
      window.download(data, fileName, mimeType);
    } else {
      // Robust fallback
      const blob = new Blob([data], { type: mimeType });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = fileName;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      window.URL.revokeObjectURL(url);
    }
  };

  // Convert any image to PNG bytes for PDF compatibility
  const convertImgToPngBytes = (file) => {
    return new Promise((resolve, reject) => {
      const img = new Image();
      img.onload = () => {
        const canvas = document.createElement('canvas');
        canvas.width = img.width;
        canvas.height = img.height;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0);
        canvas.toBlob(async (blob) => {
          if(blob) resolve(await blob.arrayBuffer());
          else reject(new Error("Canvas to Blob failed"));
        }, 'image/png');
      };
      img.onerror = (e) => reject(new Error("Image load failed"));
      img.src = URL.createObjectURL(file);
    });
  };

  // Re-render rotated preview
  const rotatePreview = (index, newRotation) => {
    const item = items[index];
    if (!item.previewUrl || !item.file.type.startsWith('image/')) return;

    const img = new Image();
    img.onload = () => {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      const rad = (newRotation * Math.PI) / 180;
      const sin = Math.abs(Math.sin(rad));
      const cos = Math.abs(Math.cos(rad));
      canvas.width = img.width * cos + img.height * sin;
      canvas.height = img.width * sin + img.height * cos;
      ctx.translate(canvas.width / 2, canvas.height / 2);
      ctx.rotate(rad);
      ctx.drawImage(img, -img.width / 2, -img.height / 2);
      
      const newUrl = canvas.toDataURL(item.file.type);
      URL.revokeObjectURL(item.previewUrl);
      setItems(prev => prev.map((it, i) => i === index ? {...it, previewUrl: newUrl} : it));
    };
    img.src = item.previewUrl;
  };

  const rotateItem = (index, direction) => {
    setItems(prev => {
      const newItems = [...prev];
      const oldRot = newItems[index].rotation;
      const newRot = (oldRot + direction + 360) % 360;
      newItems[index].rotation = newRot;
      
      const el = document.getElementById(`thumb-${index}`);
      if (el) {
        el.style.transform = `rotate(${newRot}deg)`;
        void el.offsetWidth; // Trigger reflow
      }
      
      setTimeout(() => rotatePreview(index, newRot), 500);
      return newItems;
    });
  };

  useEffect(() => {
    if (listRef.current && items.length > 1) {
      Sortable.create(listRef.current, {
        animation: 200,
        handle: '.drag-handle',
        ghostClass: 'bg-purple-100',
        onEnd: (evt) => {
          const newItems = [...items];
          const [moved] = newItems.splice(evt.oldIndex, 1);
          newItems.splice(evt.newIndex, 0, moved);
          setItems(newItems);
        }
      });
    }
  }, [items]);

  const handleDrop = (e) => {
    e.preventDefault();
    setIsDragging(false);
    // Allow image/* to support all image types (WebP, GIF, etc)
    const files = [...e.dataTransfer?.files || e.target.files || []].filter(f =>
      f.type === "application/pdf" || f.type.startsWith("image/")
    );
    if (!files.length) return setError("Only PDFs and images allowed");
    setError("");

    const newItems = files.map(file => ({
      file,
      rotation: 0,
      previewUrl: file.type.startsWith('image/') ? URL.createObjectURL(file) : null
    }));
    setItems(prev => [...prev, ...newItems]);
  };

  const removeItem = (i) => {
    if (items[i]?.previewUrl) URL.revokeObjectURL(items[i].previewUrl);
    setItems(prev => prev.filter((_, idx) => idx !== i));
  };

  const mergePDF = async () => {
    if (!items.length) return;
    setIsMerging(true);
    setError("");

    try {
      const pdfDoc = await PDFDocument.create();

      for (const {file, rotation} of items) {
        let buffer;

        if (file.type === "application/pdf") {
          buffer = await file.arrayBuffer();
          const src = await PDFDocument.load(buffer);
          const pages = await pdfDoc.copyPages(src, src.getPageIndices());
          pages.forEach(p => {
            if (rotation) p.setRotation(degrees(rotation));
            pdfDoc.addPage(p);
          });
        } else {
          // IMAGE HANDLING
          let isPng = false;
          
          if (file.type === 'image/jpeg') {
            buffer = await file.arrayBuffer();
            isPng = false;
          } else if (file.type === 'image/png') {
            buffer = await file.arrayBuffer();
            isPng = true;
          } else {
             buffer = await convertImgToPngBytes(file);
             isPng = true;
          }

          const img = isPng 
            ? await pdfDoc.embedPng(buffer)
            : await pdfDoc.embedJpg(buffer);

          const page = pdfDoc.addPage(PageSizes.A4);
          const { width, height } = page.getSize();
          const margin = 60;
          const maxW = width - 2 * margin;
          const maxH = height - 2 * margin;

          let imgW = img.width;
          let imgH = img.height;
          if (rotation % 180 !== 0) [imgW, imgH] = [imgH, imgW];

          const scale = Math.min(maxW / imgW, maxH / imgH, 1);
          const drawW = imgW * scale;
          const drawH = imgH * scale;

          page.drawImage(img, {
            x: width / 2 - drawW / 2,
            y: height / 2 - drawH / 2,
            width: drawW,
            height: drawH,
            rotate: degrees(rotation),
          });
        }
      }

      const bytes = await pdfDoc.save();
      saveFile(bytes, `UtilityKit_merged_${new Date().toISOString().slice(0,10)}.pdf`, "application/pdf");
    } catch (err) {
      console.error(err);
      setError("Merge failed: " + err.message);
    } finally {
      setIsMerging(false);
    }
  };

  return (
    <div className="bg-white dark:bg-slate-800 rounded-3xl shadow-2xl p-8 md:p-12">
      <h1 className="text-5xl font-black text-center mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">
        PDF/Image Merger + Rotate
      </h1>
      <p className="text-center text-xl text-slate-600 dark:text-slate-400 mb-10">
        Smooth animations • Perfect orientation • 100% private
      </p>

      <div
        onDragOver={e => {e.preventDefault(); setIsDragging(true)}}
        onDragLeave={() => setIsDragging(false)}
        onDrop={handleDrop}
        className={`border-4 border-dashed rounded-3xl p-20 text-center transition-all ${isDragging ? 'drag-over border-purple-500' : 'border-blue-400'}`}
      >
        <i className="fa-solid fa-cloud-arrow-up text-9xl text-blue-600 mb-6"></i>
        <p className="text-3xl font-bold mb-4 text-slate-700 dark:text-slate-200">Drop files anywhere</p>
        <label className="inline-block px-12 py-5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl text-xl font-bold cursor-pointer hover:shadow-2xl">
          Or click to choose
          <input ref={fileInputRef} type="file" multiple accept=".pdf,image/*" className="hidden" onChange={handleDrop}/>
        </label>
      </div>

      {items.length > 0 && (
        <div className="mt-12">
          <div className="flex justify-between items-center mb-8">
            <h3 className="text-2xl font-bold text-slate-700 dark:text-slate-200">
              {items.length} file{items.length > 1 ? 's' : ''} • {formatBytes(items.reduce((s,i)=>s+i.file.size,0))}
            </h3>
            <div className="flex gap-4">
              <button onClick={() => fileInputRef.current?.click()} className="text-blue-600 hover:underline font-bold">
                <i className="fas fa-plus mr-2"></i>Add more
              </button>
              <button onClick={() => { items.forEach(i => i.previewUrl && URL.revokeObjectURL(i.previewUrl)); setItems([]); }} className="text-red-600 hover:underline font-bold">
                Clear all
              </button>
            </div>
          </div>

          <div ref={listRef} className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8">
            {items.map((item, i) => (
              <div key={i} className="relative group thumbnail bg-slate-100 dark:bg-slate-700 rounded-2xl overflow-hidden shadow-xl">
                <div className="drag-handle absolute top-3 left-3 z-20 cursor-move opacity-0 group-hover:opacity-100 transition">
                  <i className="fas fa-grip-vertical text-3xl text-white drop-shadow-lg"></i>
                </div>

                {/* Rotation Controls */}
                <div className="absolute top-12 left-3 z-20 flex flex-col gap-3 opacity-0 group-hover:opacity-100 transition">
                  <button onClick={() => rotateItem(i, -90)} className="rotate-btn bg-black/70 text-white p-3 rounded-full shadow-lg">
                    <i className="fas fa-undo-alt"></i>
                  </button>
                  <button onClick={() => rotateItem(i, 90)} className="rotate-btn bg-black/70 text-white p-3 rounded-full shadow-lg">
                    <i className="fas fa-redo-alt"></i>
                  </button>
                </div>

                <button onClick={() => removeItem(i)} className="absolute top-3 right-3 z-20 bg-red-600 text-white rounded-full w-10 h-10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition shadow-lg">
                  <i className="fas fa-times"></i>
                </button>

                <div id={`thumb-${i}`} className="rotate-animation w-full h-56 flex items-center justify-center bg-gradient-to-br from-slate-200 to-slate-300 dark:from-slate-800 dark:to-slate-900 overflow-hidden">
                  {item.previewUrl ? (
                    <img src={item.previewUrl} alt="" className="max-w-full max-h-full object-contain shadow-2xl" style={{transform: `rotate(${item.rotation}deg)`}} />
                  ) : (
                    <div className="text-center">
                      <i className={`fa-solid fa-file-pdf text-8xl ${item.rotation ? 'text-red-500' : 'text-red-400'} mb-3`}></i>
                      {item.rotation !== 0 && <div className="bg-black/70 text-white px-3 py-1 rounded-full text-sm">Rotated {item.rotation}°</div>}
                    </div>
                  )}
                </div>

                <div className="p-4 text-center bg-white dark:bg-slate-900">
                  <p className="text-sm font-semibold truncate text-slate-700 dark:text-slate-300">{item.file.name}</p>
                  <p className="text-xs text-slate-500">{formatBytes(item.file.size)}{item.rotation ? ` • ${item.rotation}°` : ''}</p>
                </div>
              </div>
            ))}
          </div>

          {error && <p className="text-red-600 text-center mt-8 text-xl font-bold">{error}</p>}

          <button
            onClick={mergePDF}
            disabled={isMerging}
            className="w-full mt-12 bg-gradient-to-r from-blue-600 to-purple-600 disabled:opacity-60 text-white py-7 rounded-3xl text-3xl font-bold hover:shadow-2xl transition flex items-center justify-center gap-4"
          >
            {isMerging ? (
              <>Merging... <i className="fas fa-spinner fa-spin"></i></>
            ) : (
              <>Download Merged PDF <i className="fas fa-download"></i></>
            )}
          </button>
        </div>
      )}

      <p className="text-center mt-16">
        <a href="index.html" className="text-blue-600 hover:underline text-xl font-medium">
          ← All Tools
        </a>
      </p>
    </div>
  );
};

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Mobile Menu Toggle
    const menuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if(menuBtn && mobileMenu) {
        menuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('open');
        });
    }

    // Active Navigation State
    const currentPage = location.pathname.split('/').pop() || 'index.html';
    document.querySelectorAll('nav a').forEach(link => {
      if (link.getAttribute('href') === currentPage) {
        link.classList.add('text-indigo-600', 'font-bold');
        link.classList.remove('text-slate-700', 'dark:text-slate-300', 'hover:text-indigo-600');
      } else {
        link.classList.add('text-slate-700', 'dark:text-slate-300', 'hover:text-indigo-600');
      }
    });
  });
</script>

</body>
</html>
