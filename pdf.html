<!DOCTYPE html>
<html lang="en" class="dark scroll-smooth">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF Tools: Merge, Split, Compress • UtilityKit</title>
  <meta name="description" content="Merge, split, compress & convert PDFs online for free. Fast, secure, no watermarks, works on any device. 100% private">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "UtilityKit PDF Tools",
  "url": "https://utilitykit.xyz/pdf.html",
  "applicationCategory": "UtilitiesApplication",
  "operatingSystem": "Any",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
  "description": "Free online PDF Merger, Splitter, and Compressor. Process PDF files securely in your browser.",
  "featureList": "PDF Merge, PDF Split, PDF Compress"
}
</script>
    <!-- Adsense Start -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2884780611077861"
     crossorigin="anonymous"></script>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 dark:from-slate-950 dark:to-slate-900 min-h-screen">
<!-- Adsense End -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    .copy-feedback { opacity: 0; transition: opacity 0.4s; }
    .copy-feedback.show { opacity: 1; }
    #live-clock { animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 dark:from-slate-950 dark:to-slate-900 min-h-screen">

 <!-- Header -->
<header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-lg sticky top-0 z-50">
  <div class="container mx-auto px-6 py-5 flex flex-wrap items-center justify-between">
    <a href="index.html" class="flex items-center gap-3">
      <h1 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">UtilityKit</h1>
    </a>
    <nav class="flex flex-wrap gap-4 md:gap-6 text-lg">
      <a href="pdf.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-file-pdf mr-1"></i>PDF</a>
      <a href="image.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-image mr-1"></i>Image</a>
      <a href="qr.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-qrcode mr-1"></i>QR</a>
      <a href="ocr.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-eye mr-1"></i>OCR</a>
      <a href="calculator.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-gauge-high mr-1"></i>Calculator</a>
      <a href="password.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-key mr-1"></i>Password</a>
      <a href="json.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-code mr-1"></i>JSON</a>
      <a href="base64.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-lock mr-1"></i>Base64</a>
      <a href="timestamp.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-clock mr-1"></i>Timestamp</a>
      
      <!-- === NEW TOOLS IN NAV === -->
      <a href="compress.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-file-zipper mr-1"></i>Compressor</a>
      <a href="markdown.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-brands fa-markdown mr-1"></i>DevToolkit</a>
      <a href="currency.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-dollar-sign mr-1"></i>Currency</a>
    </nav>
  </div>
</header>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF Merger + Rotate - UtilityKit</title>
  <meta name="description" content="Merge PDFs, convert & rotate images with smooth animations — 100% private."/>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
  <script src="https://unpkg.com/sortablejs@1.15.0/Sortable.min.js"></script>
  <script src="https://unpkg.com/downloadjs@1.4.8/download.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    .rotate-animation {
      transition: transform 0.45s cubic-bezier(0.34, 1.56, 0.64, 1);
      transform-style: preserve-3d;
    }
    .drag-over { border-color: #8b5cf6 !important; background: rgba(139,92,246,0.1); }
    .thumbnail:hover { transform: translateY(-8px) scale(1.03); }
    .rotate-btn:hover { transform: scale(1.2); background: rgba(255,255,255,0.3) !important; }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 dark:from-slate-950 dark:to-slate-900 min-h-screen">
  <div id="root" class="max-w-5xl mx-auto p-6 pt-12"></div>

<script type="text/babel">
const { useState, useRef, useEffect } = React;
const { PDFDocument, PageSizes, degrees } = PDFLib;

const formatBytes = (b) => b ? `${(b / 1024 / 1024).toFixed(2)} MB` : '0 MB';

const App = () => {
  const [items, setItems] = useState([]); // {file, rotation: 0, previewUrl}
  const [isDragging, setIsDragging] = useState(false);
  const [isMerging, setIsMerging] = useState(false);
  const [error, setError] = useState("");
  const listRef = useRef();
  const fileInputRef = useRef();

  // Re-render rotated preview using canvas
  const rotatePreview = (index, newRotation) => {
    const item = items[index];
    if (!item.previewUrl || !item.file.type.startsWith('image/')) return;

    const img = new Image();
    img.onload = () => {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');

      const rad = (newRotation * Math.PI) / 180;
      const sin = Math.abs(Math.sin(rad));
      const cos = Math.abs(Math.cos(rad));

      canvas.width = img.width * cos + img.height * sin;
      canvas.height = img.width * sin + img.height * cos;

      ctx.translate(canvas.width / 2, canvas.height / 2);
      ctx.rotate(rad);
      ctx.drawImage(img, -img.width / 2, -img.height / 2);

      const newUrl = canvas.toDataURL(item.file.type);
      URL.revokeObjectURL(item.previewUrl);
      setItems(prev => prev.map((it, i) => i === index ? {...it, previewUrl: newUrl} : it));
    };
    img.src = item.previewUrl;
  };

  const rotateItem = (index, direction) => {
    setItems(prev => {
      const newItems = [...prev];
      const oldRot = newItems[index].rotation;
      const newRot = (oldRot + direction + 360) % 360;
      newItems[index].rotation = newRot;

      // Trigger animated rotation via CSS class
      const el = document.getElementById(`thumb-${index}`);
      if (el) {
        el.style.transform = `rotate(${newRot}deg)`;
        // Trigger reflow to restart animation
        void el.offsetWidth;
      }

      // Update actual image data after animation
      setTimeout(() => rotatePreview(index, newRot), 500);

      return newItems;
    });
  };

  useEffect(() => {
    if (listRef.current && items.length > 1) {
      Sortable.create(listRef.current, {
        animation: 200,
        handle: '.drag-handle',
        ghostClass: 'bg-purple-100 dark:bg-purple-900',
        onEnd: (evt) => {
          const newItems = [...items];
          const [moved] = newItems.splice(evt.oldIndex, 1);
          newItems.splice(evt.newIndex, 0, moved);
          setItems(newItems);
        }
      });
    }
  }, [items]);

  const handleDrop = (e) => {
    e.preventDefault();
    setIsDragging(false);
    const files = [...e.dataTransfer?.files || e.target.files || []].filter(f =>
      f.type === "application/pdf" || f.type.startsWith("image/")
    );
    if (!files.length) return setError("Only PDFs and images allowed");

    const newItems = files.map(file => ({
      file,
      rotation: 0,
      previewUrl: file.type.startsWith('image/') ? URL.createObjectURL(file) : null
    }));
    setItems(prev => [...prev, ...newItems]);
  };

  const removeItem = (i) => {
    if (items[i]?.previewUrl) URL.revokeObjectURL(items[i].previewUrl);
    setItems(prev => prev.filter((_, idx) => idx !== i));
  };

  const mergePDF = async () => {
    if (!items.length) return;
    setIsMerging(true);
    setError("");

    try {
      const pdfDoc = await PDFDocument.create();

      for (const {file, rotation} of items) {
        const buf = await file.arrayBuffer();

        if (file.type === "application/pdf") {
          const src = await PDFDocument.load(buf);
          const pages = await pdfDoc.copyPages(src, src.getPageIndices());
          pages.forEach(p => {
            if (rotation) p.setRotation(degrees(rotation));
            pdfDoc.addPage(p);
          });
        } else {
          const img = file.type.includes('png')
            ? await pdfDoc.embedPng(buf)
            : await pdfDoc.embedJpg(buf);

          const page = pdfDoc.addPage(PageSizes.A4);
          const { width, height } = page.getSize();
          const margin = 60;
          const maxW = width - 2 * margin;
          const maxH = height - 2 * margin;

          let imgW = img.width;
          let imgH = img.height;
          if (rotation % 180 !== 0) [imgW, imgH] = [imgH, imgW];

          const scale = Math.min(maxW / imgW, maxH / imgH, 1);
          const drawW = imgW * scale;
          const drawH = imgH * scale;

          page.drawImage(img, {
            x: width / 2 - drawW / 2,
            y: height / 2 - drawH / 2,
            width: drawW,
            height: drawH,
            rotate: degrees(rotation),
          });
        }
      }

      const bytes = await pdfDoc.save();
      download(bytes, `UtilityKit_merged_${new Date().toISOString().slice(0,10)}.pdf`, "application/pdf");
    } catch (err) {
      setError("Merge failed: " + err.message);
    } finally {
      setIsMerging(false);
    }
  };

  return (
    <div className="bg-white dark:bg-slate-800 rounded-3xl shadow-2xl p-8 md:p-12">
      <h1 className="text-5xl font-black text-center mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">
        PDF Merger + Rotate
      </h1>
      <p className="text-center text-xl text-slate-600 dark:text-slate-400 mb-10">
        Smooth animations • Perfect orientation • 100% private
      </p>

      <div
        onDragOver={e => {e.preventDefault(); setIsDragging(true)}}
        onDragLeave={() => setIsDragging(false)}
        onDrop={handleDrop}
        className={`border-4 border-dashed rounded-3xl p-20 text-center transition-all ${isDragging ? 'drag-over border-purple-500' : 'border-blue-400'}`}
      >
        <i className="fa-solid fa-cloud-arrow-up text-9xl text-blue-600 mb-6"></i>
        <p className="text-3xl font-bold mb-4">Drop files anywhere</p>
        <label className="inline-block px-12 py-5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl text-xl font-bold cursor-pointer hover:shadow-2xl">
          Or click to choose
          <input ref={fileInputRef} type="file" multiple accept=".pdf,image/*" className="hidden" onChange={handleDrop}/>
        </label>
      </div>

      {items.length > 0 && (
        <div className="mt-12">
          <div className="flex justify-between items-center mb-8">
            <h3 className="text-2xl font-bold">
              {items.length} file{items.length > 1 ? 's' : ''} • {formatBytes(items.reduce((s,i)=>s+i.file.size,0))}
            </h3>
            <div className="flex gap-4">
              <button onClick={() => fileInputRef.current?.click()} className="text-blue-600 hover:underline">
                <i className="fas fa-plus mr-2"></i>Add more
              </button>
              <button onClick={() => { items.forEach(i => i.previewUrl && URL.revokeObjectURL(i.previewUrl)); setItems([]); }} className="text-red-600 hover:underline">
                Clear all
              </button>
            </div>
          </div>

          <div ref={listRef} className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8">
            {items.map((item, i) => (
              <div key={i} className="relative group thumbnail bg-slate-100 dark:bg-slate-700 rounded-2xl overflow-hidden shadow-xl">
                <div className="drag-handle absolute top-3 left-3 z-20 cursor-move opacity-0 group-hover:opacity-100 transition">
                  <i className="fas fa-grip-vertical text-3xl text-white drop-shadow-lg"></i>
                </div>

                {/* Rotation Controls */}
                <div className="absolute top-12 left-3 z-20 flex flex-col gap-3 opacity-0 group-hover:opacity-100 transition">
                  <button onClick={() => rotateItem(i, -90)} className="rotate-btn bg-black/70 text-white p-3 rounded-full shadow-lg">
                    <i className="fas fa-undo-alt"></i>
                  </button>
                  <button onClick={() => rotateItem(i, 90)} className="rotate-btn bg-black/70 text-white p-3 rounded-full shadow-lg">
                    <i className="fas fa-redo-alt"></i>
                  </button>
                </div>

                <button onClick={() => removeItem(i)} className="absolute top-3 right-3 z-20 bg-red-600 text-white rounded-full w-10 h-10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition shadow-lg">
                  <i className="fas fa-times"></i>
                </button>

                <div id={`thumb-${i}`} className="rotate-animation w-full h-56 flex items-center justify-center bg-gradient-to-br from-slate-200 to-slate-300 dark:from-slate-800 dark:to-slate-900 overflow-hidden">
                  {item.previewUrl ? (
                    <img src={item.previewUrl} alt="" className="max-w-full max-h-full object-contain shadow-2xl" style={{transform: `rotate(${item.rotation}deg)`}} />
                  ) : (
                    <div className="text-center">
                      <i className={`fa-solid fa-file-pdf text-8xl ${item.rotation ? 'text-red-500' : 'text-red-400'} mb-3`}></i>
                      {item.rotation !== 0 && <div className="bg-black/70 text-white px-3 py-1 rounded-full text-sm">Rotated {item.rotation}°</div>}
                    </div>
                  )}
                </div>

                <div className="p-4 text-center bg-white dark:bg-slate-900">
                  <p className="text-sm font-semibold truncate">{item.file.name}</p>
                  <p className="text-xs text-slate-500">{formatBytes(item.file.size)}{item.rotation ? ` • ${item.rotation}°` : ''}</p>
                </div>
              </div>
            ))}
          </div>

          {error && <p className="text-red-600 text-center mt-8 text-xl font-bold">{error}</p>}

          <button
            onClick={mergePDF}
            disabled={isMerging}
            className="w-full mt-12 bg-gradient-to-r from-blue-600 to-purple-600 disabled:opacity-60 text-white py-7 rounded-3xl text-3xl font-bold hover:shadow-2xl transition flex items-center justify-center gap-4"
          >
            {isMerging ? (
              <>Merging... <i className="fas fa-spinner fa-spin"></i></>
            ) : (
              <>Download Merged PDF <i className="fas fa-download"></i></>
            )}
          </button>
        </div>
      )}

      <p className="text-center mt-16">
        <a href="index.html" className="text-blue-600 hover:underline text-xl font-medium">
          ← All Tools
        </a>
      </p>
    </div>
  );
};

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>

  <!-- Footer (Replace your current simple footer with this detailed structure across ALL pages) -->
<footer class="bg-slate-900 text-white mt-16 border-t border-slate-700">
  <div class="container mx-auto px-6 py-12 max-w-7xl">
    <div class="grid grid-cols-2 md:grid-cols-5 gap-8 border-b border-slate-800 pb-8 mb-8">
      <div>
        <h4 class="text-lg font-bold mb-4 text-indigo-400">UtilityKit</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="about_us.html" class="hover:text-white transition">About Us</a></li>
        </ul>
      </div>
      
      <div>
        <h4 class="text-lg font-bold mb-4 text-indigo-400">Image Tools</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="image.html" class="hover:text-white transition">Image Converter</a></li>
          <li><a href="compress.html" class="hover:text-white transition">Image Compressor</a></li>
          <li><a href="ocr.html" class="hover:text-white transition">Image OCR</a></li>
        </ul>
      </div>
      
      <div>
        <h4 class="text-lg font-bold mb-4 text-indigo-400">Data Tools</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="json.html" class="hover:text-white transition">JSON Formatter</a></li>
          <li><a href="base64.html" class="hover:text-white transition">Base64 Encoder</a></li>
          <li><a href="timestamp.html" class="hover:text-white transition">Timestamp Converter</a></li>
        </ul>
      </div>
      
      <div class="col-span-2 md:col-span-1">
        <h4 class="text-lg font-bold mb-4 text-red-400">Legal</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="privacy_policy.html" class="hover:text-white transition text-white font-bold">Privacy Policy (AdSense Required)</a></li>
          <li><a href="terms_of_service.html" class="hover:text-white transition">Terms of Service</a></li>
          <li><a href="disclaimer.html" class="hover:text-white transition">Disclaimer</a></li>
        </ul>
      </div>
    </div>
    
    <div class="text-center text-slate-500 text-sm">
      <p>&copy; 2025 UtilityKit. All rights reserved. | <span class="font-semibold text-teal-400">Powered by client-side technology for your privacy.</span></p>
    </div>
  </div>
</footer>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const currentPage = location.pathname.split('/').pop() || 'index.html';

    document.querySelectorAll('.nav-link').forEach(link => {
      if (link.getAttribute('href') === currentPage) {
        link.classList.add('text-indigo-600', 'font-bold');
        link.classList.remove('text-slate-700', 'dark:text-slate-300', 'hover:text-indigo-600');
      } else {
        link.classList.add('text-slate-700', 'dark:text-slate-300', 'hover:text-indigo-600');
      }
    });
  });
</script>
</body>
</html>
