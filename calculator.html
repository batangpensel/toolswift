<!DOCTYPE html>
<html lang="en" class="dark scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Online Calculator • UtilityKit</title>
  <meta name="description" content="Free online scientific calculator with history, keyboard support, percentage, age, BMI, loan, tip & unit converter. 100% private.">

  <!-- === NEW: Structured Data (Schema Markup) for Google === -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "UtilityKit Online Calculator",
    "url": "https://utilitykit.xyz/calculator.html",
    "author": {
      "@type": "Organization",
      "name": "UtilityKit",
      "url": "https://utilitykit.xyz"
    },
    "applicationCategory": "UtilitiesApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "description": "Free online scientific calculator with history, keyboard support, percentage, age, BMI, loan, tip & unit converter. 100% private client-side processing.",
    "featureList": "Scientific Calculator, Percentage Calculator, Age Calculator, BMI Calculator, Loan Calculator, Tip Calculator, Unit Converter"
  }
  </script>
  <!-- === END Structured Data === -->

  <!-- BEGIN: AdSense Privacy & Consent (MANDATORY for GDPR/CCPA) -->

  <!-- 1. Google CMP (Funding Choices) Script -->
  <!-- This script loads the consent dialogue. Replace 'ca-pub-0000000000000000' with your Publisher ID -->
  <script async src="https://fundingchoicesmessages.google.com/i/pub-2884780611077861?hl=en"></script>
  <script>
    (function(){
      var w=window;
      if(w.CmpApi)return;
      w.CmpApi=function(c,l,a,i){w.gmc_p_f=w.gmc_p_f||[];w.gmc_p_f.push([c,l,a,i]);};
      w.CmpApi('setUiCallback', function(e){
        if(e.type === 'SHOW') document.documentElement.classList.add('overflow-hidden');
        if(e.type === 'HIDE') document.documentElement.classList.remove('overflow-hidden');
      });
    })();
  </script>

  <!-- 2. CCPA Privacy Configuration Script (__uspapi) -->
  <script>
    (function(){
      function signalGoogleIframe() {
        if (!window.frames['__uspapi_iframe']) {
          var iframe = document.createElement('iframe');
          iframe.setAttribute('style', 'display:none;');
          iframe.setAttribute('id', '__uspapi_iframe');
          iframe.setAttribute('name', '__uspapi_iframe');
          document.body.appendChild(iframe);
        }
      }
      if(typeof window.__uspapi === 'undefined') {
        window.__uspapi = function() {
          var args = arguments;
          if (typeof window.__uspapi.stub === 'undefined') {
            window.__uspapi.stub = [];
          }
          window.__uspapi.stub.push(args);
        }
      }
      var ccpaCall = ['getUSPData', 1, function(data, success) {
        if (success) {
          if (data && data.hasOwnProperty('uspString')) {
            window.__uspapi('setCfg', 1, {
              uspString: data.uspString,
              shouldEnforceSettings: false
            });
          }
        }
      }];
      window.addEventListener('message', function(e) {
        if (e.data && e.data.__cmpCall) {
          e.data.__cmpCall(ccpaCall);
        }
      }, false);
      signalGoogleIframe();
    })();
  </script>

  <!-- 3. Google AdSense Auto Ads Script -->
  <!-- IMPORTANT: Replace 'ca-pub-0000000000000000' with your Publisher ID -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=pub-2884780611077861" crossorigin="anonymous"></script>

  <!-- END: AdSense Privacy & Consent -->
  
  <!-- Adsense Start -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2884780611077861"
     crossorigin="anonymous"></script>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 dark:from-slate-950 dark:to-slate-900 min-h-screen">
<!-- Adsense End -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    /* Custom Scrollbar for History */
    .history-scroll::-webkit-scrollbar { width: 6px; }
    .history-scroll::-webkit-scrollbar-track { background: transparent; }
    .history-scroll::-webkit-scrollbar-thumb { background-color: #4b5563; border-radius: 20px; }
    
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 dark:from-slate-950 dark:to-slate-900 min-h-screen font-sans text-slate-800 dark:text-slate-200">

<!-- Header -->
<header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-lg sticky top-0 z-50">
  <div class="container mx-auto px-6 py-5 flex flex-wrap items-center justify-between">
    <a href="index.html" class="flex items-center gap-3">
      <h1 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">UtilityKit</h1>
    </a>
    <nav class="flex flex-wrap gap-4 md:gap-6 text-lg">
      <a href="pdf.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-file-pdf mr-1"></i>PDF</a>
      <a href="image.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-image mr-1"></i>Image</a>
      <a href="qr.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-qrcode mr-1"></i>QR</a>
      <a href="ocr.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-eye mr-1"></i>OCR</a>
      <a href="calculator.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-gauge-high mr-1"></i>Calculator</a>
      <a href="password.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-key mr-1"></i>Password</a>
      <a href="json.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-code mr-1"></i>JSON</a>
      <a href="base64.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-lock mr-1"></i>Base64</a>
      <a href="timestamp.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-clock mr-1"></i>Timestamp</a>
      
      <!-- === NEW TOOLS IN NAV === -->
      <a href="compress.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-file-zipper mr-1"></i>Compressor</a>
      <a href="markdown.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-brands fa-markdown mr-1"></i>DevToolkit</a>
      <a href="currency.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-dollar-sign mr-1"></i>Currency</a>
    </nav>
  </div>
</header>

 <!-- Main Content -->
 <main class="container mx-auto px-4 py-12 max-w-6xl">
    
    <!-- Tab Navigation -->
    <div class="flex flex-wrap justify-center gap-2 mb-12 bg-white dark:bg-slate-800 p-2 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700">
        <button class="tab-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all duration-200 bg-indigo-600 text-white shadow-md" data-tab="scientific">
            <i class="fa-solid fa-calculator mr-2"></i>Scientific
        </button>
        <button class="tab-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all duration-200 text-slate-500 hover:text-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 dark:hover:text-slate-200" data-tab="percentage">
            <i class="fa-solid fa-percent mr-2"></i>Percentage
        </button>
        <button class="tab-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all duration-200 text-slate-500 hover:text-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 dark:hover:text-slate-200" data-tab="age">
            <i class="fa-solid fa-calendar-days mr-2"></i>Age
        </button>
        <button class="tab-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all duration-200 text-slate-500 hover:text-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 dark:hover:text-slate-200" data-tab="bmi">
            <i class="fa-solid fa-weight-scale mr-2"></i>BMI
        </button>
        <button class="tab-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all duration-200 text-slate-500 hover:text-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 dark:hover:text-slate-200" data-tab="loan">
            <i class="fa-solid fa-money-bill-wave mr-2"></i>Loan
        </button>
        <button class="tab-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all duration-200 text-slate-500 hover:text-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 dark:hover:text-slate-200" data-tab="tip">
            <i class="fa-solid fa-coins mr-2"></i>Tip
        </button>
        <button class="tab-btn px-6 py-3 rounded-xl font-semibold text-sm transition-all duration-200 text-slate-500 hover:text-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 dark:hover:text-slate-200" data-tab="unit">
            <i class="fa-solid fa-ruler-combined mr-2"></i>Unit
        </button>
    </div>

    <!-- 1. Scientific Calculator -->
    <div id="scientific" class="tab-content text-center">
        <h2 class="text-3xl font-bold mb-8">Scientific Calculator</h2>
        
        <div class="flex flex-col lg:flex-row gap-6 justify-center items-start max-w-5xl mx-auto">
            
            <!-- Calculator Pad -->
            <div class="w-full max-w-md mx-auto bg-slate-900 p-6 rounded-3xl shadow-2xl border border-slate-700 relative z-10">
                <!-- Mode Toggles & Status -->
                <div class="flex justify-between items-center mb-4 text-xs font-bold text-slate-400 px-2">
                    <button id="deg-rad-btn" onclick="toggleDegRad()" class="px-2 py-1 rounded hover:bg-slate-700 text-indigo-400 transition-colors">DEG</button>
                    <span><i class="fa-regular fa-keyboard mr-1"></i> Keyboard Active</span>
                </div>

                <input type="text" id="calc-display" class="w-full bg-slate-800 text-right text-4xl text-white p-6 rounded-2xl mb-6 font-mono border-none outline-none overflow-hidden" placeholder="0" readonly>
                
                <div class="grid grid-cols-4 gap-3">
                    <button onclick="clearAll()" class="p-4 rounded-xl bg-red-500/10 text-red-500 font-bold hover:bg-red-500/20 text-sm">AC</button>
                    <button onclick="deleteLastChar()" class="p-4 rounded-xl bg-slate-700 text-orange-400 hover:bg-slate-600 text-sm font-bold">DEL</button>
                    <button onclick="calculateSpecial('perc')" class="p-4 rounded-xl bg-slate-700 text-white hover:bg-slate-600 text-lg">%</button>
                    <button onclick="handleOperator('/')" class="p-4 rounded-xl bg-indigo-600 text-white hover:bg-indigo-500 text-xl">÷</button>
                    
                    <button onclick="inputDigit('7')" class="p-4 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-bold text-xl">7</button>
                    <button onclick="inputDigit('8')" class="p-4 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-bold text-xl">8</button>
                    <button onclick="inputDigit('9')" class="p-4 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-bold text-xl">9</button>
                    <button onclick="handleOperator('*')" class="p-4 rounded-xl bg-indigo-600 text-white hover:bg-indigo-500 text-xl">×</button>
                    
                    <button onclick="inputDigit('4')" class="p-4 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-bold text-xl">4</button>
                    <button onclick="inputDigit('5')" class="p-4 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-bold text-xl">5</button>
                    <button onclick="inputDigit('6')" class="p-4 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-bold text-xl">6</button>
                    <button onclick="handleOperator('-')" class="p-4 rounded-xl bg-indigo-600 text-white hover:bg-indigo-500 text-xl">−</button>
                    
                    <button onclick="inputDigit('1')" class="p-4 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-bold text-xl">1</button>
                    <button onclick="inputDigit('2')" class="p-4 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-bold text-xl">2</button>
                    <button onclick="inputDigit('3')" class="p-4 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-bold text-xl">3</button>
                    <button onclick="handleOperator('+')" class="p-4 rounded-xl bg-indigo-600 text-white hover:bg-indigo-500 text-xl">+</button>
                    
                    <button onclick="inputDigit('0')" class="col-span-2 p-4 rounded-xl bg-slate-800 text-white hover:bg-slate-700 font-bold text-xl">0</button>
                    <button onclick="inputDecimal('.')" class="p-4 rounded-xl bg-slate-800 text-white hover:bg-slate-700 text-xl">.</button>
                    <button onclick="handleOperator('=')" class="p-4 rounded-xl bg-indigo-500 text-white hover:bg-indigo-400 text-xl">=</button>
                </div>
                
                <!-- Scientific Row -->
                <div class="grid grid-cols-4 gap-3 mt-3 pt-3 border-t border-slate-700">
                    <button onclick="calculateSpecial('sqrt')" class="p-3 rounded-lg bg-slate-800 text-slate-300 text-sm hover:text-white transition-colors">√</button>
                    <button onclick="calculateSpecial('pow2')" class="p-3 rounded-lg bg-slate-800 text-slate-300 text-sm hover:text-white transition-colors">x²</button>
                    <button onclick="calculateSpecial('pi')" class="p-3 rounded-lg bg-slate-800 text-slate-300 text-sm hover:text-white transition-colors">π</button>
                    <button onclick="calculateSpecial('log')" class="p-3 rounded-lg bg-slate-800 text-slate-300 text-sm hover:text-white transition-colors">log</button>
                    <button onclick="calculateSpecial('sin')" class="p-3 rounded-lg bg-slate-800 text-slate-300 text-sm hover:text-white transition-colors">sin</button>
                    <button onclick="calculateSpecial('cos')" class="p-3 rounded-lg bg-slate-800 text-slate-300 text-sm hover:text-white transition-colors">cos</button>
                    <button onclick="calculateSpecial('tan')" class="p-3 rounded-lg bg-slate-800 text-slate-300 text-sm hover:text-white transition-colors">tan</button>
                    <button onclick="calculateSpecial('1/x')" class="p-3 rounded-lg bg-slate-800 text-slate-300 text-sm hover:text-white transition-colors">1/x</button>
                </div>
            </div>

            <!-- History Panel -->
            <div class="w-full lg:w-80 bg-white dark:bg-slate-800 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-[600px] lg:h-auto self-stretch">
                <div class="p-4 bg-slate-100 dark:bg-slate-900 border-b dark:border-slate-700 flex justify-between items-center">
                    <h3 class="font-bold text-slate-700 dark:text-slate-300"><i class="fa-solid fa-clock-rotate-left mr-2"></i>History</h3>
                    <button onclick="clearHistory()" class="text-xs text-red-500 hover:text-red-600 font-semibold px-2 py-1 hover:bg-red-50 dark:hover:bg-red-900/20 rounded">Clear</button>
                </div>
                <div id="history-list" class="flex-1 overflow-y-auto p-4 space-y-3 history-scroll text-left">
                    <div class="text-center text-slate-400 text-sm mt-10 italic" id="empty-history-msg">No history yet</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 2. Percentage Calculator -->
    <div id="percentage" class="tab-content hidden text-center">
        <h2 class="text-3xl font-bold mb-8">Percentage Calculator</h2>
        <div class="max-w-xl mx-auto bg-gray-50 dark:bg-slate-900 p-8 rounded-2xl shadow-sm">
            <div class="space-y-6">
                <div class="flex items-center gap-4 bg-white dark:bg-slate-800 p-4 rounded-xl border border-gray-200 dark:border-slate-700">
                    <span class="font-bold">What is</span>
                    <input type="number" id="perc-val" class="w-24 p-2 text-center rounded-lg bg-gray-100 dark:bg-slate-700" placeholder="10">
                    <span class="font-bold">% of</span>
                    <input type="number" id="perc-total" class="flex-1 p-2 text-center rounded-lg bg-gray-100 dark:bg-slate-700" placeholder="500">
                </div>
                <button onclick="calcPercentage()" class="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all">Calculate</button>
                <div class="p-6 bg-indigo-50 dark:bg-slate-800 rounded-xl">
                    <p class="text-sm text-slate-500 uppercase font-bold mb-2">Result</p>
                    <p class="text-4xl font-black text-indigo-600 dark:text-indigo-400" id="perc-res">--</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 3. Age Calculator -->
    <div id="age" class="tab-content hidden text-center">
      <h2 class="text-3xl font-bold mb-8">Age Calculator</h2>
      <div class="max-w-xl mx-auto bg-gray-50 dark:bg-slate-900 p-6 rounded-2xl shadow-sm">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label class="block text-sm font-semibold text-slate-500 mb-2">Date of Birth / From</label>
            <input type="date" id="age-from" class="w-full p-4 text-lg text-center rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-indigo-500 outline-none transition-all" onchange="calculateAge()">
          </div>
          <div>
            <label class="block text-sm font-semibold text-slate-500 mb-2">Calculate To / Until</label>
            <input type="date" id="age-to" class="w-full p-4 text-lg text-center rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 focus:ring-2 focus:ring-indigo-500 outline-none transition-all" onchange="calculateAge()">
          </div>
        </div>
    
        <div class="p-6 bg-indigo-50 dark:bg-slate-800 rounded-xl border border-indigo-100 dark:border-slate-700">
          <p class="text-xs font-bold text-slate-500 uppercase tracking-wide mb-2">Exact Age / Duration</p>
          <p class="text-4xl md:text-5xl font-black text-indigo-600 dark:text-indigo-400" id="age-result">--</p>
        </div>
      </div>
    </div>

    <!-- 4. BMI Calculator -->
    <div id="bmi" class="tab-content hidden text-center">
      <h2 class="text-3xl font-bold mb-8">BMI Calculator</h2>
      
      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        <!-- Input Section -->
        <div class="space-y-6">
          <div class="bg-gray-50 dark:bg-slate-900 p-6 rounded-2xl">
            <label class="block text-left text-sm font-bold text-slate-500 mb-2 ml-1">Height</label>
            <div class="relative">
              <input type="number" id="bmi-height" placeholder="e.g. 175" class="w-full p-4 pl-4 pr-16 text-xl rounded-xl bg-white dark:bg-slate-800 border border-transparent focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 outline-none transition-all" oninput="calcBMI()">
              <span class="absolute right-6 top-4 text-slate-400 font-bold">cm</span>
            </div>
          </div>
    
          <div class="bg-gray-50 dark:bg-slate-900 p-6 rounded-2xl">
            <label class="block text-left text-sm font-bold text-slate-500 mb-2 ml-1">Weight</label>
            <div class="relative">
              <input type="number" id="bmi-weight" placeholder="e.g. 70" class="w-full p-4 pl-4 pr-16 text-xl rounded-xl bg-white dark:bg-slate-800 border border-transparent focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 outline-none transition-all" oninput="calcBMI()">
              <span class="absolute right-6 top-4 text-slate-400 font-bold">kg</span>
            </div>
          </div>
    
          <div class="p-6 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-indigo-50 dark:border-slate-700">
            <p class="text-sm text-slate-500 uppercase font-bold mb-2">Your BMI</p>
            <p class="text-5xl font-black text-indigo-600 dark:text-indigo-400 mb-2" id="bmi-res">--</p>
            <p class="text-xl font-medium text-slate-700 dark:text-slate-300" id="bmi-category">Enter details</p>
          </div>
        </div>
    
        <!-- Reference Table -->
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-gray-100 dark:border-slate-700 overflow-hidden h-fit">
          <div class="bg-slate-100 dark:bg-slate-900 p-4 border-b dark:border-slate-700">
            <h3 class="font-bold text-lg text-slate-700 dark:text-slate-300">BMI Categories</h3>
          </div>
          <table class="w-full text-left border-collapse">
            <thead>
              <tr class="text-xs uppercase text-slate-500 border-b dark:border-slate-700">
                <th class="p-4">Category</th>
                <th class="p-4 text-right">Range</th>
              </tr>
            </thead>
            <tbody class="text-sm">
              <tr class="border-b dark:border-slate-700 transition-colors" id="row-under">
                <td class="p-4 font-medium text-blue-500">Underweight</td>
                <td class="p-4 text-right text-slate-600 dark:text-slate-400">&lt; 18.5</td>
              </tr>
              <tr class="border-b dark:border-slate-700 transition-colors" id="row-normal">
                <td class="p-4 font-medium text-green-600">Normal Weight</td>
                <td class="p-4 text-right text-slate-600 dark:text-slate-400">18.5 – 24.9</td>
              </tr>
              <tr class="border-b dark:border-slate-700 transition-colors" id="row-over">
                <td class="p-4 font-medium text-orange-500">Overweight</td>
                <td class="p-4 text-right text-slate-600 dark:text-slate-400">25 – 29.9</td>
              </tr>
              <tr class="transition-colors" id="row-obese">
                <td class="p-4 font-medium text-red-500">Obesity</td>
                <td class="p-4 text-right text-slate-600 dark:text-slate-400">≥ 30</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- 5. Loan Calculator -->
    <div id="loan" class="tab-content hidden text-center">
        <h2 class="text-3xl font-bold mb-8">Loan Calculator</h2>
        <div class="max-w-xl mx-auto bg-gray-50 dark:bg-slate-900 p-8 rounded-2xl shadow-sm">
            <div class="space-y-4">
                <input type="number" id="loan-amount" placeholder="Loan Amount ($)" class="w-full p-4 rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700">
                <input type="number" id="loan-rate" placeholder="Interest Rate (%)" class="w-full p-4 rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700">
                <input type="number" id="loan-term" placeholder="Loan Term (Years)" class="w-full p-4 rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700">
                
                <button onclick="calcLoan()" class="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all mt-4">Calculate Payment</button>
                
                <div class="p-6 bg-indigo-50 dark:bg-slate-800 rounded-xl mt-6">
                    <p class="text-sm text-slate-500 uppercase font-bold mb-2">Monthly Payment</p>
                    <p class="text-4xl font-black text-indigo-600 dark:text-indigo-400" id="loan-res">--</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 6. Tip Calculator -->
    <div id="tip" class="tab-content hidden text-center">
        <h2 class="text-3xl font-bold mb-8">Tip Calculator</h2>
        <div class="max-w-xl mx-auto bg-gray-50 dark:bg-slate-900 p-8 rounded-2xl shadow-sm">
            <div class="grid grid-cols-2 gap-4 mb-4">
                <input type="number" id="tip-bill" placeholder="Bill Amount" class="col-span-2 p-4 rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700">
                <input type="number" id="tip-perc" placeholder="Tip %" class="p-4 rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700">
                <input type="number" id="tip-people" placeholder="People" class="p-4 rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700" value="1">
            </div>
            <button onclick="calcTip()" class="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all">Calculate</button>
            <div class="grid grid-cols-2 gap-4 mt-6">
                <div class="p-4 bg-indigo-50 dark:bg-slate-800 rounded-xl">
                    <p class="text-xs text-slate-500 uppercase font-bold">Total Tip</p>
                    <p class="text-2xl font-black text-indigo-600 dark:text-indigo-400" id="tip-total">--</p>
                </div>
                <div class="p-4 bg-indigo-50 dark:bg-slate-800 rounded-xl">
                    <p class="text-xs text-slate-500 uppercase font-bold">Per Person</p>
                    <p class="text-2xl font-black text-indigo-600 dark:text-indigo-400" id="tip-person">--</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 7. Unit Converter -->
    <div id="unit" class="tab-content hidden text-center">
        <h2 class="text-3xl font-bold mb-8">Unit Converter</h2>
        <div class="max-w-xl mx-auto bg-gray-50 dark:bg-slate-900 p-8 rounded-2xl shadow-sm">
            <div class="flex flex-col gap-4">
                <select id="unit-category" onchange="updateUnits()" class="w-full p-4 rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 font-bold uppercase text-sm"></select>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <input type="number" id="unit-input" placeholder="Value" oninput="convertUnit()" class="w-full p-4 rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 mb-2">
                        <select id="unit-from" onchange="convertUnit()" class="w-full p-3 rounded-lg bg-gray-200 dark:bg-slate-700 text-sm"></select>
                    </div>
                    <div class="flex flex-col justify-center items-center">
                         <div class="text-2xl font-bold text-indigo-600 dark:text-indigo-400 mb-2 break-all" id="unit-res">--</div>
                         <select id="unit-to" onchange="convertUnit()" class="w-full p-3 rounded-lg bg-gray-200 dark:bg-slate-700 text-sm"></select>
                    </div>
                </div>
            </div>
        </div>
    </div>

 </main>

 <!-- Footer -->
 <footer class="bg-white/50 dark:bg-slate-900/50 backdrop-blur border-t border-slate-200 dark:border-slate-800 mt-20">
    <div class="container mx-auto px-6 py-8 text-center text-slate-500 text-sm">
      <p>&copy; 2025 UtilityKit. All rights reserved.</p>
    </div>
 </footer>

 <!-- UNIFIED JAVASCRIPT -->
 <script>
    // --- Global Data & State ---
    const units = {
        'length': { 'm': 1, 'cm': 100, 'mm': 1000, 'km': 0.001, 'in': 39.3701, 'ft': 3.28084, 'yd': 1.09361, 'mi': 0.000621371 },
        'mass': { 'kg': 1, 'g': 1000, 'mg': 1000000, 'lb': 2.20462, 'oz': 35.274, 't': 0.001 },
        'volume': { 'l': 1, 'ml': 1000, 'gal': 0.264172, 'qt': 1.05669, 'pt': 2.11338, 'cup': 4.22675 },
        'temperature': { 'c': 1, 'f': 33.8, 'k': 274.15 }
    };
    let currentCategory = 'length';
    
    // Scientific Calc State
    let currentInput = '0';
    let previousInput = null; // Changed from '' to null for cleaner logic
    let operator = null;
    let waitForSecondOperand = false;
    let isDegrees = true; 
    let calcHistory = []; 
    const display = document.getElementById('calc-display');

    // --- INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
        // 1. Setup Tabs
        const tabs = document.querySelectorAll('.tab-btn');
        const contents = document.querySelectorAll('.tab-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Reset styling
                tabs.forEach(t => {
                    t.classList.remove('bg-indigo-600', 'text-white');
                    t.classList.add('text-slate-500', 'hover:text-slate-700');
                });
                // Activate
                tab.classList.remove('text-slate-500', 'hover:text-slate-700');
                tab.classList.add('bg-indigo-600', 'text-white');

                // Toggle Content
                contents.forEach(c => c.classList.add('hidden'));
                const targetId = tab.getAttribute('data-tab');
                const targetEl = document.getElementById(targetId);
                if(targetEl) {
                    targetEl.classList.remove('hidden');
                    // Auto-run/Init specific tabs
                    if (targetId === 'bmi') calcBMI();
                    if (targetId === 'age') {
                        const ageTo = document.getElementById('age-to');
                        if (ageTo && !ageTo.value) ageTo.valueAsDate = new Date();
                        calculateAge();
                    }
                }
            });
        });

        // 2. Init Unit Converter
        const unitCat = document.getElementById('unit-category');
        if (unitCat) {
            unitCat.innerHTML = Object.keys(units).map(c=>`<option value="${c}">${c.charAt(0).toUpperCase()+c.slice(1)}</option>`).join('');
            updateUnits();
        }

        // 3. Init Age "To" Date
        const ageTo = document.getElementById('age-to');
        if (ageTo) ageTo.valueAsDate = new Date();

        // 4. Keyboard Support Listener
        document.addEventListener('keydown', handleKeyboardInput);
    });


    // --- CALCULATOR FUNCTIONS ---

    // 1. Scientific Calculator
    function handleKeyboardInput(e) {
        // Only trigger if Scientific tab is active
        const sciTab = document.getElementById('scientific');
        if (sciTab.classList.contains('hidden')) return;

        const key = e.key;
        
        if (/[0-9]/.test(key)) inputDigit(key);
        if (key === '.') inputDecimal('.');
        if (key === '=' || key === 'Enter') { e.preventDefault(); handleOperator('='); }
        if (key === 'Backspace') deleteLastChar();
        if (key === 'Escape') clearAll();
        if (key === '+') handleOperator('+');
        if (key === '-') handleOperator('-');
        if (key === '*' || key === 'x') handleOperator('*');
        if (key === '/') handleOperator('/');
    }

    function deleteLastChar() {
        if (waitForSecondOperand) return; 
        if (currentInput.length > 1) {
            currentInput = currentInput.slice(0, -1);
        } else {
            currentInput = '0';
        }
        updateDisplay();
    }

    function toggleDegRad() {
        isDegrees = !isDegrees;
        const btn = document.getElementById('deg-rad-btn');
        btn.textContent = isDegrees ? 'DEG' : 'RAD';
        btn.classList.add('bg-indigo-600', 'text-white');
        setTimeout(() => btn.classList.remove('bg-indigo-600', 'text-white'), 200);
    }

    function clearAll() {
        currentInput = '0'; previousInput = null; operator = null; waitForSecondOperand = false;
        updateDisplay();
    }

    function updateDisplay() { if(display) display.value = currentInput; }

    function inputDigit(digit) {
        if (waitForSecondOperand) {
            currentInput = digit;
            waitForSecondOperand = false;
        } else {
            currentInput = currentInput === '0' ? digit : currentInput + digit;
        }
        updateDisplay();
    }

    function inputDecimal(dot) {
        if (waitForSecondOperand) {
            currentInput = '0.';
            waitForSecondOperand = false;
        } else if (!currentInput.includes(dot)) {
            currentInput += dot;
        }
        updateDisplay();
    }

    // FIXED LOGIC: Correctly handles chaining, =, and new calculations
    function handleOperator(nextOperator) {
        const inputValue = parseFloat(currentInput);

        // If user just pressed an operator (5 + ), and clicks another ( * ), just swap them
        if (operator && waitForSecondOperand) {
            operator = nextOperator;
            return;
        }

        // If this is the first operator (5 + )
        if (previousInput === null) {
            previousInput = inputValue;
        } 
        // If there is already an operator pending (5 + 3), calculate it now
        else if (operator) {
            const result = performCalculation[operator](previousInput, inputValue);
            
            // Add to history BEFORE resetting for the new operator
            addToHistory(previousInput, operator, inputValue, result);

            currentInput = String(result);
            previousInput = result;
        }

        // Setup for the next step
        waitForSecondOperand = true;
        
        // If user pressed '=', we are done with this chain.
        if (nextOperator === '=') {
            operator = null; // Clear operator so next number starts fresh
            previousInput = null; // Clear previous so typing a number starts fresh
            waitForSecondOperand = true; // Wait for new number
        } else {
            operator = nextOperator; // Continue chain
        }
        
        updateDisplay();
    }

    const performCalculation = {
        '/': (first, second) => first / second, 
        '*': (first, second) => first * second,
        '+': (first, second) => first + second, 
        '-': (first, second) => first - second
    };

    function calculateSpecial(type) {
        let val = parseFloat(currentInput); if (isNaN(val)) return;
        let result = val;
        let expr = `${type}(${val})`;

        switch (type) {
            case 'sqrt': result = Math.sqrt(val); expr = `√${val}`; break;
            case 'pow2': result = val * val; expr = `${val}²`; break;
            case '1/x': result = 1 / val; expr = `1/${val}`; break;
            case 'pi': result = Math.PI; expr = 'π'; break;
            case 'log': result = Math.log10(val); break;
            case 'sin': 
                result = Math.sin(isDegrees ? val * Math.PI / 180 : val); 
                expr = `sin(${val}${isDegrees ? '°' : 'rad'})`;
                break;
            case 'cos': 
                result = Math.cos(isDegrees ? val * Math.PI / 180 : val); 
                expr = `cos(${val}${isDegrees ? '°' : 'rad'})`;
                break;
            case 'tan': 
                result = Math.tan(isDegrees ? val * Math.PI / 180 : val); 
                expr = `tan(${val}${isDegrees ? '°' : 'rad'})`;
                break;
            case 'perc': result = val / 100; expr = `${val}%`; break;
        }

        // Format
        if (Math.abs(result) < 0.000001 || Math.abs(result) > 1000000000) {
             result = result.toExponential(4);
        } else {
             // Avoid float errors like 0.1 + 0.2 = 0.300000004
             result = parseFloat(result.toPrecision(12));
        }

        // Special functions are self-contained, so we add to history immediately
        addToHistorySpecial(expr, result);

        currentInput = String(result); 
        waitForSecondOperand = true; 
        updateDisplay();
    }

    // History Logic
    function addToHistory(prev, op, curr, res) {
        const expr = `${prev} ${op} ${curr}`;
        _pushHistory(expr, res);
    }
    
    function addToHistorySpecial(expr, res) {
        _pushHistory(expr, res);
    }

    function _pushHistory(expr, res) {
        // Avoid duplicate entries if user spams keys
        if (calcHistory.length > 0 && calcHistory[0].expr === expr) return;
        
        calcHistory.unshift({ expr: expr, res: res });
        if (calcHistory.length > 20) calcHistory.pop();
        renderHistory();
    }

    function renderHistory() {
        const list = document.getElementById('history-list');
        const emptyMsg = document.getElementById('empty-history-msg');
        
        if (calcHistory.length === 0) {
            if(emptyMsg) emptyMsg.style.display = 'block';
            list.innerHTML = '';
            if(emptyMsg) list.appendChild(emptyMsg);
            return;
        }
        
        if(emptyMsg) emptyMsg.style.display = 'none';
        
        // Safe rebuild
        list.innerHTML = calcHistory.map((item) => `
            <div onclick="loadHistory('${item.res}')" class="p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl hover:bg-indigo-50 dark:hover:bg-slate-700 cursor-pointer transition-colors group mb-2">
                <div class="text-xs text-slate-400 font-mono mb-1">${item.expr} =</div>
                <div class="text-lg font-bold text-slate-700 dark:text-slate-200 group-hover:text-indigo-600 dark:group-hover:text-indigo-400">${item.res}</div>
            </div>
        `).join('');
    }

    function clearHistory() {
        calcHistory = [];
        renderHistory();
    }

    function loadHistory(val) {
        currentInput = String(val);
        waitForSecondOperand = true;
        updateDisplay();
    }

    // 2. Percentage Calculator
    function calcPercentage() {
        const val = parseFloat(document.getElementById('perc-val').value);
        const total = parseFloat(document.getElementById('perc-total').value);
        const res = document.getElementById('perc-res');
        if(!val || !total) { res.textContent = "--"; return; }
        res.textContent = ((val / 100) * total).toFixed(2);
    }

    // 3. Age Calculator (FIXED)
    function calculateAge() {
        const fromStr = document.getElementById('age-from').value;
        const toStr = document.getElementById('age-to').value;
        const res = document.getElementById('age-result');
        if (!fromStr || !toStr) { res.textContent = "--"; return; }

        const from = new Date(fromStr);
        const to = new Date(toStr);
        if (from > to) { res.innerHTML = "<span class='text-red-500 text-lg'>Start date must be earlier</span>"; return; }

        let y = to.getFullYear() - from.getFullYear();
        let m = to.getMonth() - from.getMonth();
        let d = to.getDate() - from.getDate();

        if (d < 0) { m--; d += new Date(to.getFullYear(), to.getMonth(), 0).getDate(); }
        if (m < 0) { y--; m += 12; }

        res.innerHTML = `${y}<span class="text-xl font-normal text-slate-400">y</span> ${m}<span class="text-xl font-normal text-slate-400">m</span> ${d}<span class="text-xl font-normal text-slate-400">d</span>`;
    }

    // 4. BMI Calculator (FIXED & SMART)
    function calcBMI() {
        const hInput = parseFloat(document.getElementById('bmi-height').value);
        const w = parseFloat(document.getElementById('bmi-weight').value);
        const resEl = document.getElementById('bmi-res');
        const catEl = document.getElementById('bmi-category');

        if (!hInput || !w) {
            resEl.textContent = "--"; catEl.textContent = "Enter details";
            catEl.className = "text-xl font-medium text-slate-700 dark:text-slate-300";
            resetTableHighlight(); return;
        }

        // Smart Unit: Convert to Meters. If > 3.0, assume CM.
        let h_meters = (hInput > 3.0) ? hInput / 100 : hInput;
        
        // Safety: Don't calc if height is wildly small (typing "1" for 175cm)
        if(h_meters < 0.5) {
             resEl.textContent = "--"; return;
        }

        const bmi = (w / (h_meters * h_meters)).toFixed(1);
        resEl.textContent = bmi;

        let cat = "", color = "", rowId = "";
        resetTableHighlight();

        if (bmi < 18.5) { cat = "Underweight"; color = "text-blue-500"; rowId = "row-under"; }
        else if (bmi < 25) { cat = "Normal Weight"; color = "text-green-600"; rowId = "row-normal"; }
        else if (bmi < 30) { cat = "Overweight"; color = "text-orange-500"; rowId = "row-over"; }
        else { cat = "Obesity"; color = "text-red-500"; rowId = "row-obese"; }

        catEl.className = "text-xl font-bold " + color;
        catEl.textContent = cat;
        const row = document.getElementById(rowId);
        if(row) row.classList.add('bg-indigo-100', 'dark:bg-slate-700');
    }
    function resetTableHighlight() {
        ['row-under', 'row-normal', 'row-over', 'row-obese'].forEach(id => {
            const el = document.getElementById(id);
            if(el) el.classList.remove('bg-indigo-100', 'dark:bg-slate-700');
        });
    }

    // 5. Loan Calculator
    function calcLoan() {
        const amt = parseFloat(document.getElementById('loan-amount').value);
        const rate = parseFloat(document.getElementById('loan-rate').value);
        const term = parseFloat(document.getElementById('loan-term').value);
        const res = document.getElementById('loan-res');

        if (!amt || !rate || !term) { res.textContent = "--"; return; }

        const monthlyRate = (rate / 100) / 12;
        const months = term * 12;
        const payment = (amt * monthlyRate * Math.pow(1 + monthlyRate, months)) / (Math.pow(1 + monthlyRate, months) - 1);

        res.textContent = "$" + payment.toFixed(2);
    }

    // 6. Tip Calculator
    function calcTip() {
        const bill = parseFloat(document.getElementById('tip-bill').value);
        const tipPerc = parseFloat(document.getElementById('tip-perc').value);
        const people = parseFloat(document.getElementById('tip-people').value) || 1;
        
        if (!bill || !tipPerc) return;

        const totalTip = bill * (tipPerc / 100);
        const totalBill = bill + totalTip;
        
        document.getElementById('tip-total').textContent = "$" + totalTip.toFixed(2);
        document.getElementById('tip-person').textContent = "$" + (totalBill / people).toFixed(2);
    }

    // 7. Unit Converter
    function updateUnits() {
        const cat = document.getElementById('unit-category').value;
        currentCategory = cat;
        const opts = Object.keys(units[cat]).map(u=>`<option value="${u}">${u.toUpperCase()}</option>`).join('');
        document.getElementById('unit-from').innerHTML = opts;
        document.getElementById('unit-to').innerHTML = opts;
        // Defaults
        const from = document.getElementById('unit-from');
        const to = document.getElementById('unit-to');
        if(cat==='length') { from.value='m'; to.value='km'; }
        else if(cat==='mass') { from.value='kg'; to.value='lb'; }
        else if(cat==='temperature') { from.value='c'; to.value='f'; }
        convertUnit();
    }
    function convertUnit() {
        const from = document.getElementById('unit-from').value;
        const to = document.getElementById('unit-to').value;
        const val = parseFloat(document.getElementById('unit-input').value);
        if (isNaN(val)) { document.getElementById('unit-res').textContent = "--"; return; }

        let res = val;
        if (currentCategory === 'temperature') {
            let baseC = val;
            if(from==='f') baseC=(val-32)*(5/9); else if(from==='k') baseC=val-273.15;
            if(to==='f') res=(baseC*(9/5))+32; else if(to==='k') res=baseC+273.15; else res=baseC;
            res = parseFloat(res.toFixed(2));
        } else {
            res = (val / units[currentCategory][from]) * units[currentCategory][to];
            if (res < 0.0001 && res !== 0) res = res.toExponential(4);
            else res = parseFloat(res.toFixed(4));
        }
        document.getElementById('unit-res').textContent = res + " " + to.toUpperCase();
    }
 </script>

  <!-- Footer (Replace your current simple footer with this detailed structure across ALL pages) -->
<footer class="bg-slate-900 text-white mt-16 border-t border-slate-700">
  <div class="container mx-auto px-6 py-12 max-w-7xl">
    <div class="grid grid-cols-2 md:grid-cols-5 gap-8 border-b border-slate-800 pb-8 mb-8">
      <div>
        <h4 class="text-lg font-bold mb-4 text-indigo-400">UtilityKit</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="about_us.html" class="hover:text-white transition">About Us</a></li>
        </ul>
      </div>
      
      <div>
        <h4 class="text-lg font-bold mb-4 text-indigo-400">Image Tools</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="image.html" class="hover:text-white transition">Image Converter</a></li>
          <li><a href="compress.html" class="hover:text-white transition">Image Compressor</a></li>
          <li><a href="ocr.html" class="hover:text-white transition">Image OCR</a></li>
        </ul>
      </div>
      
      <div>
        <h4 class="text-lg font-bold mb-4 text-indigo-400">Data Tools</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="json.html" class="hover:text-white transition">JSON Formatter</a></li>
          <li><a href="base64.html" class="hover:text-white transition">Base64 Encoder</a></li>
          <li><a href="timestamp.html" class="hover:text-white transition">Timestamp Converter</a></li>
        </ul>
      </div>
      
      <div class="col-span-2 md:col-span-1">
        <h4 class="text-lg font-bold mb-4 text-red-400">Legal</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="privacy_policy.html" class="hover:text-white transition text-white font-bold">Privacy Policy (AdSense Required)</a></li>
          <li><a href="terms_of_service.html" class="hover:text-white transition">Terms of Service</a></li>
          <li><a href="disclaimer.html" class="hover:text-white transition">Disclaimer</a></li>
        </ul>
      </div>
    </div>
    
    <div class="text-center text-slate-500 text-sm">
      <p>&copy; 2025 UtilityKit. All rights reserved. | <span class="font-semibold text-teal-400">Powered by client-side technology for your privacy.</span></p>
    </div>
  </div>
</footer>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const currentPage = location.pathname.split('/').pop() || 'index.html';

    document.querySelectorAll('.nav-link').forEach(link => {
      if (link.getAttribute('href') === currentPage) {
        link.classList.add('text-indigo-600', 'font-bold');
        link.classList.remove('text-slate-700', 'dark:text-slate-300', 'hover:text-indigo-600');
      } else {
        link.classList.add('text-slate-700', 'dark:text-slate-300', 'hover:text-indigo-600');
      }
    });
  });
</script>
</body>
</html>
