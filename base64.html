<!DOCTYPE html>
<html lang="en" class="dark scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Base64 Encoder / Decoder • ToolSwift</title>
  <meta name="description" content="Convert text, images, and files to/from Base64 instantly • 100% private • No upload">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    .drop-zone { transition: all 0.3s; border: 4px dashed #f472b6; }
    .drop-zone.dragover { border-color: #ec4899; background-color: #fdf2f8; transform: scale(1.02); }
    .copy-feedback { opacity: 0; transition: opacity 0.4s; }
    .copy-feedback.show { opacity: 1; }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 dark:from-slate-950 dark:to-slate-900 min-h-screen">

  <!-- Header -->
<header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-lg sticky top-0 z-50">
  <div class="container mx-auto px-6 py-5 flex flex-wrap items-center justify-between">
    <a href="index.html" class="flex items-center gap-3">
      <h1 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">ToolSwift</h1>
    </a>
    <nav class="flex flex-wrap gap-4 md:gap-6 text-lg">
      <a href="pdf.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-file-pdf mr-1"></i>PDF</a>
      <a href="image.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-image mr-1"></i>Image</a>
      <a href="qr.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-qrcode mr-1"></i>QR</a>
      <a href="ocr.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-eye mr-1"></i>OCR</a>
      <a href="calculator.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-gauge-high mr-1"></i>Calculator</a>
      <a href="password.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-key mr-1"></i>Password</a>
      <a href="json.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-code mr-1"></i>JSON</a>
      <a href="base64.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-lock mr-1"></i>Base64</a>
      <a href="timestamp.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-clock mr-1"></i>Timestamp</a>
      
      <!-- === NEW TOOLS IN NAV === -->
      <a href="compress.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-file-zipper mr-1"></i>Compressor</a>
      <a href="markdown.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-brands fa-markdown mr-1"></i>Markdown</a>
      <a href="currency.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-dollar-sign mr-1"></i>Currency</a>
    </nav>
  </div>
</header>

  <div class="container mx-auto px-6 py-16 max-w-7xl">
    <div class="text-center mb-12">
      <h1 class="text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-red-600 mb-4">
        Base64 Encoder / Decoder
      </h1>
      <p class="text-2xl text-slate-700 dark:text-slate-300">Text • Images • Files ↔ Base64 • 100% Private • Instant</p>
    </div>

    <div class="grid lg:grid-cols-2 gap-10">
      <!-- Input Side -->
      <div class="space-y-8">
        <!-- Text Input -->
        <div class="bg-white dark:bg-slate-800 rounded-3xl shadow-2xl p-8">
          <h2 class="text-3xl font-bold mb-6 flex items-center gap-3">
            <i class="fa-solid fa-font text-pink-600"></i> Text ↔ Base64
          </h2>
          <textarea id="text-input" class="w-full h-48 p-6 font-mono text-lg bg-gray-50 dark:bg-slate-900 rounded-2xl resize-none focus:ring-4 focus:ring-pink-300" placeholder="Enter text or Base64..."></textarea>
          <div class="flex gap-4 mt-6">
            <button onclick="encodeText()" class="flex-1 bg-gradient-to-r from-pink-500 to-red-600 text-white py-5 rounded-2xl font-bold hover:shadow-xl transition">Encode →</button>
            <button onclick="decodeText()" class="flex-1 bg-gradient-to-r from-purple-500 to-indigo-600 text-white py-5 rounded-2xl font-bold hover:shadow-xl transition">← Decode</button>
          </div>
        </div>

        <!-- File / Image Input -->
        <div class="bg-white dark:bg-slate-800 rounded-3xl shadow-2xl p-8">
          <h2 class="text-3xl font-bold mb-6 flex items-center gap-3">
            <i class="fa-solid fa-image text-red-600"></i> Image / File → Base64
          </h2>
          <label>
            <input type="file" id="file-input" class="hidden">
            <div id="drop-zone" class="drop-zone rounded-3xl p-20 text-center cursor-pointer">
              <i class="fa-solid fa-cloud-arrow-up text-9xl text-pink-600 mb-6"></i>
              <p class="text-3xl font-bold">Drop file here or click</p>
              <p class="text-lg text-slate-500 mt-4">Images, PDFs, any file • Max 50MB</p>
            </div>
          </label>
          <img id="image-preview" class="mt-6 w-full rounded-2xl shadow-xl hidden" alt="Preview">
          <p id="file-name" class="mt-4 text-center text-xl font-medium text-slate-600 dark:text-slate-400"></p>
        </div>
      </div>

      <!-- Output Side -->
      <div class="space-y-8">
        <div class="bg-white dark:bg-slate-800 rounded-3xl shadow-2xl p-8 flex flex-col h-full">
          <h2 class="text-3xl font-bold mb-6">Result (Base64)</h2>
          <textarea id="output" class="flex-1 min-h-96 p-6 font-mono text-lg bg-gray-50 dark:bg-slate-900 rounded-2xl resize-none" readonly placeholder="Result appears here..."></textarea>
          
          <div class="flex gap-4 mt-6">
            <button onclick="copyOutput()" class="flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-5 rounded-2xl font-bold hover:shadow-xl transition relative">
              <i class="fas fa-copy mr-3"></i> Copy Base64
              <div class="copy-feedback absolute -top-12 left-1/2 -translate-x-1/2 bg-black text-white px-6 py-3 rounded-lg font-bold">Copied!</div>
            </button>
            <button onclick="downloadBase64()" id="download-btn" class="flex-1 bg-gray-600 text-white py-5 rounded-2xl font-bold hover:bg-gray-700 transition hidden">
              <i class="fas fa-download mr-3"></i> Download File
            </button>
          </div>
          <button onclick="decodeAsImage()" id="view-image-btn" class="mt-4 w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-5 rounded-2xl font-bold hover:shadow-xl transition hidden">
            <i class="fas fa-eye mr-3"></i> View as Image
          </button>
        </div>
      </div>
    </div>

    <p class="text-center mt-12"><a href="index.html" class="text-indigo-600 text-xl hover:underline">← Back to All Tools</a></p>
  </div>

  <script>
    // Header active state
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.nav-link').forEach(link => {
        if (link.getAttribute('href') === location.pathname.split('/').pop()) {
          link.classList.add('text-indigo-600', 'font-bold');
        } else {
          link.classList.add('text-slate-700', 'dark:text-slate-300', 'hover:text-indigo-600');
        }
      });
    });

    const textInput = document.getElementById('text-input');
    const fileInput = document.getElementById('file-input');
    const dropZone = document.getElementById('drop-zone');
    const output = document.getElementById('output');
    const imagePreview = document.getElementById('image-preview');
    const fileName = document.getElementById('file-name');
    const downloadBtn = document.getElementById('download-btn');
    const viewImageBtn = document.getElementById('view-image-btn');

    let currentFileName = '';
    let currentFileType = '';

    // Drag & Drop
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(event => {
      dropZone.addEventListener(event, e => { e.preventDefault(); e.stopPropagation(); });
    });
    ['dragenter', 'dragover'].forEach(event => dropZone.addEventListener(event, () => dropZone.classList.add('dragover')));
    ['dragleave', 'drop'].forEach(event => dropZone.addEventListener(event, () => dropZone.classList.remove('dragover')));
    dropZone.addEventListener('drop', e => handleFile(e.dataTransfer.files[0]));
    dropZone.addEventListener('click', () => fileInput.click());
    fileInput.addEventListener('change', () => handleFile(fileInput.files[0]));

    function handleFile(file) {
      if (!file) return;
      currentFileName = file.name;
      currentFileType = file.type;
      fileName.textContent = file.name;

      const reader = new FileReader();
      reader.onload = e => {
        const base64 = e.target.result.split(',')[1];
        output.value = base64;
        downloadBtn.classList.remove('hidden');

        if (file.type.startsWith('image/')) {
          imagePreview.src = e.target.result;
          imagePreview.classList.remove('hidden');
          viewImageBtn.classList.add('hidden');
        } else {
          imagePreview.classList.add('hidden');
        }
      };
      reader.readAsDataURL(file);
    }

    function encodeText() {
      try {
        output.value = btoa(unescape(encodeURIComponent(textInput.value)));
      } catch (e) {
        output.value = 'Error: Invalid text for encoding';
      }
    }

    function decodeText() {
      try {
        output.value = decodeURIComponent(escape(atob(textInput.value)));
      } catch (e) {
        output.value = 'Error: Invalid Base64';
      }
    }

    function decodeAsImage() {
      const base64 = output.value.trim();
      if (!base64) return;
      const url = 'data:image/png;base64,' + base64;
      imagePreview.src = url;
      imagePreview.classList.remove('hidden');
      viewImageBtn.classList.add('hidden');
      downloadBtn.classList.remove('hidden');
    }

    function copyOutput() {
      navigator.clipboard.writeText(output.value);
      const feedback = document.querySelector('.copy-feedback');
      feedback.classList.add('show');
      setTimeout(() => feedback.classList.remove('show'), 2000);
    }

    function downloadBase64() {
      const base64 = output.value.trim();
      if (!base64) return;
      const link = document.createElement('a');
      link.href = 'data:application/octet-stream;base64,' + base64;
      link.download = currentFileName || 'file.bin';
      link.click();
    }

    // Auto-detect when pasting Base64 into text
    textInput.addEventListener('input', () => {
      const val = textInput.value.trim();
      if (/^[A-Za-z0-9+/=]+$/.test(val) && val.length > 50) {
        output.value = 'Paste → click Decode';
      }
    });
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
</body>
</html>
