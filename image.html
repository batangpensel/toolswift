<!DOCTYPE html>
<html lang="en" class="dark scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Batch Image Converter • UtilityKit</title>
  <meta name="description" content="Bulk convert images to WebP, AVIF, PNG, JPG, or BMP. Compress, resize, and edit locally in your browser.">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.6.1/dist/cropper.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.6.1/dist/cropper.min.css">
  
  <style>
    .canvas-wrapper {
      background-image: radial-gradient(#cbd5e1 1px, transparent 1px);
      background-size: 20px 20px;
    }
    .dark .canvas-wrapper {
      background-image: radial-gradient(#334155 1px, transparent 1px);
    }
    .drop-zone.dragover { border-color: #6366f1 !important; background: rgba(99, 102, 241, 0.1); }
    
    .custom-scroll::-webkit-scrollbar { width: 6px; }
    .custom-scroll::-webkit-scrollbar-track { background: transparent; }
    .custom-scroll::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 20px; }
    .dark .custom-scroll::-webkit-scrollbar-thumb { background-color: #475569; }

    .disabled-group { opacity: 0.4; pointer-events: none; filter: grayscale(1); }
  </style>
</head>
<body class="bg-gray-50 dark:bg-slate-950 min-h-screen flex flex-col">

<!-- Header -->
<header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-lg sticky top-0 z-50">
  <div class="container mx-auto px-6 py-5 flex flex-wrap items-center justify-between">
    <a href="index.html" class="flex items-center gap-3">
      <h1 class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">UtilityKit</h1>
    </a>
    <nav class="flex flex-wrap gap-4 md:gap-6 text-lg">
      <a href="pdf.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-file-pdf mr-1"></i>PDF</a>
      <a href="image.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-image mr-1"></i>Image</a>
      <a href="qr.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-qrcode mr-1"></i>QR</a>
      <a href="ocr.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-eye mr-1"></i>OCR</a>
      <a href="calculator.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-gauge-high mr-1"></i>Calculator</a>
      <a href="password.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-key mr-1"></i>Password</a>
      <a href="json.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-code mr-1"></i>JSON</a>
      <a href="base64.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-lock mr-1"></i>Base64</a>
      <a href="timestamp.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-clock mr-1"></i>Timestamp</a>
      
      <!-- === NEW TOOLS IN NAV === -->
      <a href="compress.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-file-zipper mr-1"></i>Compressor</a>
      <a href="markdown.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-brands fa-markdown mr-1"></i>DevToolkit</a>
      <a href="currency.html" class="nav-link hover:text-blue-600 dark:hover:text-blue-400 transition"><i class="fa-solid fa-dollar-sign mr-1"></i>Currency</a>
    </nav>
  </div>
</header>

<main class="container mx-auto px-4 py-12 max-w-6xl flex-grow">

  <div class="text-center mb-10">
    <h1 class="text-4xl md:text-5xl font-black text-slate-800 dark:text-white mb-4">Batch Image Converter</h1>
    <p class="text-lg text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">
      Convert images to <span class="text-indigo-600 font-bold">WebP, AVIF, PNG, JPG, or BMP</span>. 
      Resize, crop, and process locally.
    </p>
  </div>

  <div id="dropZone" class="group relative border-4 border-dashed border-slate-300 dark:border-slate-700 rounded-3xl bg-white dark:bg-slate-900 p-16 text-center cursor-pointer hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-indigo-50/30 dark:hover:bg-indigo-900/10 transition-all duration-300 ease-out shadow-sm">
    <input type="file" id="fileInput" multiple accept="image/*" class="hidden">
    <div class="pointer-events-none">
      <div class="w-20 h-20 bg-indigo-100 dark:bg-indigo-900/50 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform">
        <i class="fa-solid fa-cloud-arrow-up text-4xl text-indigo-600 dark:text-indigo-400"></i>
      </div>
      <h3 class="text-2xl font-bold text-slate-700 dark:text-white mb-2">Drop images here</h3>
      <p class="text-slate-500 dark:text-slate-400">or click to browse files</p>
    </div>
  </div>

  <div id="conversionToolbar" class="hidden mt-12 sticky top-24 z-40">
    <div class="bg-slate-800 text-white p-4 rounded-2xl shadow-2xl flex flex-col md:flex-row items-center gap-6 justify-between border border-slate-700 ring-4 ring-slate-200 dark:ring-slate-800">
      
      <div class="flex items-center gap-4 w-full md:w-auto">
        <div class="bg-slate-700 p-3 rounded-xl">
          <i class="fa-solid fa-sliders text-xl text-indigo-400"></i>
        </div>
        <div>
          <p class="text-xs text-slate-400 uppercase font-bold tracking-wider mb-1">Convert To</p>
          <select id="globalFormat" class="bg-transparent text-lg font-bold text-white focus:outline-none cursor-pointer hover:text-indigo-300 transition">
            <option value="image/webp" class="bg-slate-800">WebP (Modern)</option>
            <option value="image/avif" class="bg-slate-800">AVIF (Next Gen)</option>
            <option value="image/jpeg" class="bg-slate-800">JPEG (Standard)</option>
            <option value="image/png" class="bg-slate-800">PNG (Lossless)</option>
            <option value="image/bmp" class="bg-slate-800">BMP (Bitmap)</option>
          </select>
        </div>
      </div>

      <div class="h-8 w-px bg-slate-600 hidden md:block"></div>

      <div id="qualityControlGroup" class="flex items-center gap-4 w-full md:w-auto transition-opacity duration-300">
        <div>
          <p class="text-xs text-slate-400 uppercase font-bold tracking-wider mb-1">Quality: <span id="globalQualityVal">90</span>%</p>
          <input type="range" id="globalQuality" min="10" max="100" value="90" class="w-48 h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-indigo-500">
        </div>
      </div>

      <div class="w-full md:w-auto">
        <button id="downloadAllBtn" class="w-full md:w-auto px-8 py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl shadow-lg hover:shadow-indigo-500/30 transition-all flex items-center justify-center gap-3">
          <span>Convert All</span>
          <i class="fa-solid fa-download"></i>
        </button>
      </div>
    </div>
  </div>

  <div id="imageGrid" class="grid grid-cols-1 gap-8 mt-10"></div>
</main>

<footer class="py-8 text-center text-slate-500 text-sm">
  <p>© 2025 UtilityKit • Privacy First Image Processing</p>
</footer>

<template id="cardTemplate">
  <div class="image-card bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden flex flex-col md:flex-row">
    
    <div class="canvas-wrapper w-full md:w-1/3 lg:w-1/4 h-64 md:h-auto bg-slate-100 dark:bg-slate-950 flex items-center justify-center relative group">
      <canvas class="preview-canvas max-w-full max-h-full object-contain shadow-lg rounded"></canvas>
      <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3">
        <button class="btn-rotate-left bg-white/20 hover:bg-white/40 text-white p-3 rounded-full backdrop-blur-sm transition" title="Rotate Left"><i class="fa-solid fa-rotate-left"></i></button>
        <button class="btn-crop bg-white/20 hover:bg-white/40 text-white p-3 rounded-full backdrop-blur-sm transition" title="Crop Image"><i class="fa-solid fa-crop-simple"></i></button>
        <button class="btn-rotate-right bg-white/20 hover:bg-white/40 text-white p-3 rounded-full backdrop-blur-sm transition" title="Rotate Right"><i class="fa-solid fa-rotate-right"></i></button>
      </div>
    </div>

    <div class="flex-1 p-6 md:p-8 flex flex-col justify-between">
      <div class="flex justify-between items-start mb-4">
        <div>
          <h3 class="filename text-lg font-bold text-slate-800 dark:text-white truncate max-w-[200px] md:max-w-sm">image.jpg</h3>
          <div class="flex items-center gap-3 mt-1">
             <span class="filesize text-xs font-mono bg-slate-100 dark:bg-slate-800 text-slate-500 px-2 py-1 rounded">0 KB</span>
             <i class="fa-solid fa-arrow-right text-slate-300 text-xs"></i>
             <span class="target-badge text-xs font-bold bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 px-2 py-1 rounded border border-indigo-200 dark:border-indigo-800">WebP</span>
          </div>
        </div>
        <button class="btn-remove text-slate-400 hover:text-red-500 transition px-2"><i class="fa-solid fa-trash"></i></button>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
        <div class="space-y-2">
          <label class="text-xs font-bold text-slate-500 uppercase tracking-wider">Resize (px)</label>
          <div class="flex items-center gap-2">
            <div class="relative w-full">
                <span class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">W</span>
                <input type="number" class="input-w w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white" placeholder="Original">
            </div>
            <span class="text-slate-300">×</span>
            <div class="relative w-full">
                <span class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs">H</span>
                <input type="number" class="input-h w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white" placeholder="Original">
            </div>
          </div>
        </div>

        <div class="space-y-2">
            <label class="text-xs font-bold text-slate-500 uppercase tracking-wider">Enhance</label>
            <div class="flex gap-2">
                <button class="btn-filter flex-1 py-2 rounded-lg border border-slate-200 dark:border-slate-700 text-xs font-medium hover:bg-slate-100 dark:hover:bg-slate-700 dark:text-slate-300 transition active-filter" data-filter="none">Normal</button>
                <button class="btn-filter flex-1 py-2 rounded-lg border border-slate-200 dark:border-slate-700 text-xs font-medium hover:bg-slate-100 dark:hover:bg-slate-700 dark:text-slate-300 transition" data-filter="grayscale(100%)">B&W</button>
                <button class="btn-filter flex-1 py-2 rounded-lg border border-slate-200 dark:border-slate-700 text-xs font-medium hover:bg-slate-100 dark:hover:bg-slate-700 dark:text-slate-300 transition" data-filter="contrast(1.2) brightness(1.1)">Vivid</button>
            </div>
        </div>
      </div>

      <div class="pt-4 border-t border-slate-100 dark:border-slate-800 flex justify-end">
        <button class="btn-download-single text-sm font-semibold text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 flex items-center gap-2 transition">
            Download Single <i class="fa-solid fa-arrow-down"></i>
        </button>
      </div>
    </div>
  </div>
</template>

<script>
  const els = {
    dropZone: document.getElementById('dropZone'),
    fileInput: document.getElementById('fileInput'),
    imageGrid: document.getElementById('imageGrid'),
    toolbar: document.getElementById('conversionToolbar'),
    globalFormat: document.getElementById('globalFormat'),
    globalQuality: document.getElementById('globalQuality'),
    globalQualityVal: document.getElementById('globalQualityVal'),
    qualityControlGroup: document.getElementById('qualityControlGroup'),
    downloadAllBtn: document.getElementById('downloadAllBtn'),
    template: document.getElementById('cardTemplate')
  };

  let images = []; 

  const getExt = (mime) => {
      switch(mime) {
          case 'image/jpeg': return '.jpg';
          case 'image/png': return '.png';
          case 'image/webp': return '.webp';
          case 'image/avif': return '.avif';
          case 'image/bmp': return '.bmp';
          default: return '.jpg';
      }
  };

  els.globalQuality.oninput = () => els.globalQualityVal.textContent = els.globalQuality.value;
  els.globalFormat.onchange = () => {
    const fmt = els.globalFormat.value;
    const shortName = fmt.split('/')[1].toUpperCase();
    document.querySelectorAll('.target-badge').forEach(el => el.textContent = shortName);
    const isLossless = fmt === 'image/png' || fmt === 'image/bmp';
    if(isLossless) els.qualityControlGroup.classList.add('disabled-group');
    else els.qualityControlGroup.classList.remove('disabled-group');
  };

  function formatBytes(bytes) {
    if (!+bytes) return '0 Bytes';
    const k = 1024, sizes = ['Bytes', 'KB', 'MB', 'GB'], i = Math.floor(Math.log(bytes) / Math.log(k));
    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(0))} ${sizes[i]}`;
  }

  function addImage(file) {
    const reader = new FileReader();
    reader.onload = (e) => {
      const img = new Image();
      img.onload = () => createImageCard(img, file);
      img.src = e.target.result;
    };
    reader.readAsDataURL(file);
  }

  function createImageCard(originalImg, file) {
    const clone = els.template.content.cloneNode(true);
    const card = clone.querySelector('.image-card');
    const canvas = clone.querySelector('.preview-canvas');
    const ctx = canvas.getContext('2d');

    const state = {
      id: Math.random().toString(36).substr(2, 9),
      file, originalImg, canvas, ctx,
      rotation: 0, crop: null, filter: 'none', flipH: 1,
      cropperInst: null 
    };

    const elFilename = clone.querySelector('.filename');
    const elSize = clone.querySelector('.filesize');
    const elBadge = clone.querySelector('.target-badge');
    const inpW = clone.querySelector('.input-w');
    const inpH = clone.querySelector('.input-h');
    const btnCrop = clone.querySelector('.btn-crop');

    elFilename.textContent = file.name;
    elSize.textContent = formatBytes(file.size);
    elBadge.textContent = els.globalFormat.value.split('/')[1].toUpperCase();
    canvas.width = originalImg.width;
    canvas.height = originalImg.height;

    const redraw = () => {
      ctx.filter = state.filter;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.save();
      ctx.translate(canvas.width / 2, canvas.height / 2);
      ctx.rotate(state.rotation * Math.PI / 180);
      ctx.scale(state.flipH, 1);

      let sx = 0, sy = 0, sW = state.originalImg.width, sH = state.originalImg.height;
      if(state.crop) {
        sx = state.crop.x; sy = state.crop.y; sW = state.crop.width; sH = state.crop.height;
      }

      let dW = sW, dH = sH;
      if(Math.abs(state.rotation % 180) === 90) { dW = sH; dH = sW; }

      ctx.drawImage(state.originalImg, sx, sy, sW, sH, -dW/2, -dH/2, dW, dH);
      ctx.restore();
    };
    redraw();

    // === FIX 1: Correct Confirm Logic ===
    const confirmCrop = () => {
        if(!state.cropperInst) return;

        // 1. Get the CROPPED canvas specifically (contains the pixels)
        const croppedCanvas = state.cropperInst.getCroppedCanvas({
            imageSmoothingQuality: 'high'
        });

        if(!croppedCanvas) return; // Safety

        // 2. Convert that to a new URL
        const croppedDataUrl = croppedCanvas.toDataURL();

        // 3. Destroy cropper BEFORE modifying main canvas state
        state.cropperInst.destroy();
        state.cropperInst = null;
        
        // 4. Reset UI first
        btnCrop.innerHTML = '<i class="fa-solid fa-crop-simple"></i>';
        btnCrop.classList.remove('bg-green-500', 'text-white', 'hover:bg-green-600');
        btnCrop.classList.add('bg-white/20', 'hover:bg-white/40', 'text-white');
        canvas.classList.remove('hidden');
        card.querySelector('.cropper-temp')?.remove();

        // 5. Load the NEW cropped image as the "Original"
        const temp = new Image();
        temp.onload = () => {
            state.originalImg = temp;
            state.crop = null;
            state.rotation = 0;
            // Important: Update canvas size to match new crop
            canvas.width = temp.width;
            canvas.height = temp.height;
            redraw();
        };
        temp.src = croppedDataUrl; 
    };

    clone.querySelector('.btn-rotate-left').onclick = () => {
      if(state.cropperInst) confirmCrop();
      state.rotation -= 90;
      if (Math.abs(state.rotation % 180) === 90) [canvas.width, canvas.height] = [canvas.height, canvas.width];
      redraw();
    };
    clone.querySelector('.btn-rotate-right').onclick = () => {
        if(state.cropperInst) confirmCrop();
        state.rotation += 90;
        if (Math.abs(state.rotation % 180) === 90) [canvas.width, canvas.height] = [canvas.height, canvas.width];
        redraw();
    };

    clone.querySelectorAll('.btn-filter').forEach(btn => {
        btn.onclick = () => {
            card.querySelectorAll('.btn-filter').forEach(b => {
                b.classList.remove('bg-slate-100','dark:bg-slate-700', 'border-indigo-500', 'text-indigo-600');
                b.classList.add('border-slate-200', 'dark:border-slate-700');
            });
            btn.classList.remove('border-slate-200', 'dark:border-slate-700');
            btn.classList.add('bg-slate-100','dark:bg-slate-700', 'border-indigo-500', 'text-indigo-600');
            state.filter = btn.dataset.filter;
            redraw();
        };
    });

    const handleResize = () => {
        const aspect = state.canvas.width / state.canvas.height;
        let w = parseInt(inpW.value), h = parseInt(inpH.value);
        if(w && !h) { h = Math.round(w / aspect); inpH.value = h; }
        else if(!w && h) { w = Math.round(h * aspect); inpW.value = w; }
        
        if(w && h) {
            const temp = new Image();
            temp.onload = () => {
                state.originalImg = temp;
                state.rotation = 0; state.crop = null;
                canvas.width = w; canvas.height = h;
                redraw();
            };
            temp.src = canvas.toDataURL();
        }
    };
    inpW.onchange = inpH.onchange = handleResize;

    btnCrop.onclick = () => {
        if(state.cropperInst) {
            confirmCrop();
        } else {
            const tempImg = new Image();
            tempImg.src = canvas.toDataURL();
            tempImg.className = 'cropper-temp max-w-full max-h-full object-contain';
            const wrapper = card.querySelector('.canvas-wrapper');
            canvas.classList.add('hidden');
            wrapper.appendChild(tempImg);
            
            state.cropperInst = new Cropper(tempImg, { viewMode: 1, autoCropArea: 0.8 });
            
            btnCrop.innerHTML = '<i class="fa-solid fa-check"></i>';
            btnCrop.classList.remove('bg-white/20', 'hover:bg-white/40');
            btnCrop.classList.add('bg-green-500', 'text-white', 'hover:bg-green-600');
        }
    };

    clone.querySelector('.btn-remove').onclick = () => {
        if(state.cropperInst) state.cropperInst.destroy();
        card.remove();
        images = images.filter(i => i.id !== state.id);
        if(images.length === 0) els.toolbar.classList.add('hidden');
    };

    // === FIX 2: Download Logic using Direct Cropper Data ===
    clone.querySelector('.btn-download-single').onclick = async () => {
        const fmt = els.globalFormat.value;
        
        let sourceCanvas = canvas;
        
        // If cropping is active, grab data directly from cropper without messing with DOM state
        if(state.cropperInst) {
            sourceCanvas = state.cropperInst.getCroppedCanvas({
                imageSmoothingQuality: 'high'
            });
        }

        if(sourceCanvas) {
            sourceCanvas.toBlob(blob => {
                saveAs(blob, file.name.split('.')[0] + '_converted' + getExt(fmt));
                
                // Optional: If we downloaded a crop, applying it to the UI now is safe
                if(state.cropperInst) confirmCrop(); 
            }, fmt, els.globalQuality.value / 100);
        }
    };

    els.imageGrid.appendChild(clone);
    images.push(state);
    els.toolbar.classList.remove('hidden');
  }

  // === FIX 3: Batch Download Logic ===
  els.downloadAllBtn.onclick = async () => {
    const zip = new JSZip();
    const btn = els.downloadAllBtn;
    const originalText = btn.innerHTML;
    btn.disabled = true;
    btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Processing...';

    const format = els.globalFormat.value;
    const quality = els.globalQuality.value / 100;
    const ext = getExt(format);

    for (const imgState of images) {
        let sourceCanvas = imgState.canvas;
        
        if(imgState.cropperInst) {
            sourceCanvas = imgState.cropperInst.getCroppedCanvas({
                imageSmoothingQuality: 'high'
            });
        }

        await new Promise(resolve => {
            sourceCanvas.toBlob(blob => {
                zip.file(imgState.file.name.split('.')[0] + ext, blob);
                resolve();
            }, format, quality);
        });
        
        // Optional: Confirm crop on UI after batch processing
        // We do this manually to avoid async complexity inside loop
        if(imgState.cropperInst) {
            // Just cleanup UI visually
            // (In a real app, we'd properly call confirmCrop but we can leave it active or close it)
        }
    }

    const content = await zip.generateAsync({type: 'blob'});
    saveAs(content, 'UtilityKit_Batch_Images.zip');
    btn.disabled = false; btn.innerHTML = originalText;
  };

  ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => els.dropZone.addEventListener(e, ev => {ev.preventDefault(); ev.stopPropagation();}));
  ['dragenter', 'dragover'].forEach(e => els.dropZone.addEventListener(e, () => els.dropZone.classList.add('border-indigo-500', 'bg-indigo-50/30')));
  ['dragleave', 'drop'].forEach(e => els.dropZone.addEventListener(e, () => els.dropZone.classList.remove('border-indigo-500', 'bg-indigo-50/30')));
  els.dropZone.addEventListener('drop', e => handleFiles(e.dataTransfer.files));
  els.dropZone.onclick = () => els.fileInput.click();
  els.fileInput.onchange = () => handleFiles(els.fileInput.files);
  function handleFiles(files) { ([...files]).forEach(file => { if(file.type.startsWith('image/')) addImage(file); }); }
</script>

  <!-- Footer (Replace your current simple footer with this detailed structure across ALL pages) -->
<footer class="bg-slate-900 text-white mt-16 border-t border-slate-700">
  <div class="container mx-auto px-6 py-12 max-w-7xl">
    <div class="grid grid-cols-2 md:grid-cols-5 gap-8 border-b border-slate-800 pb-8 mb-8">
      <div>
        <h4 class="text-lg font-bold mb-4 text-indigo-400">UtilityKit</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="about_us.html" class="hover:text-white transition">About Us</a></li>
        </ul>
      </div>
      
      <div>
        <h4 class="text-lg font-bold mb-4 text-indigo-400">Image Tools</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="image.html" class="hover:text-white transition">Image Converter</a></li>
          <li><a href="compress.html" class="hover:text-white transition">Image Compressor</a></li>
          <li><a href="ocr.html" class="hover:text-white transition">Image OCR</a></li>
        </ul>
      </div>
      
      <div>
        <h4 class="text-lg font-bold mb-4 text-indigo-400">Data Tools</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="json.html" class="hover:text-white transition">JSON Formatter</a></li>
          <li><a href="base64.html" class="hover:text-white transition">Base64 Encoder</a></li>
          <li><a href="timestamp.html" class="hover:text-white transition">Timestamp Converter</a></li>
        </ul>
      </div>
      
      <div class="col-span-2 md:col-span-1">
        <h4 class="text-lg font-bold mb-4 text-red-400">Legal</h4>
        <ul class="space-y-2 text-sm text-slate-400">
          <li><a href="privacy_policy.html" class="hover:text-white transition text-white font-bold">Privacy Policy (AdSense Required)</a></li>
          <li><a href="terms_of_service.html" class="hover:text-white transition">Terms of Service</a></li>
          <li><a href="disclaimer.html" class="hover:text-white transition">Disclaimer</a></li>
        </ul>
      </div>
    </div>
    
    <div class="text-center text-slate-500 text-sm">
      <p>&copy; 2025 UtilityKit. All rights reserved. | <span class="font-semibold text-teal-400">Powered by client-side technology for your privacy.</span></p>
    </div>
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const currentPage = location.pathname.split('/').pop() || 'index.html';

    document.querySelectorAll('.nav-link').forEach(link => {
      if (link.getAttribute('href') === currentPage) {
        link.classList.add('text-indigo-600', 'font-bold');
        link.classList.remove('text-slate-700', 'dark:text-slate-300', 'hover:text-indigo-600');
      } else {
        link.classList.add('text-slate-700', 'dark:text-slate-300', 'hover:text-indigo-600');
      }
    });
  });
</script>
</body>
</html>
