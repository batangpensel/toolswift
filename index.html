<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ToolSwift: Free online PDF Converter, Image Resizer, QR Generator, OCR, and Speed Test. Secure, client-side, and fast.">
    <title>ToolSwift - Free All-in-One Web Utilities</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Function Libraries -->
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 4px; }
        .loader { border: 3px solid #f3f3f3; border-top: 3px solid #3b82f6; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { PDFDocument } = PDFLib;

        // --- UI Components ---

        const Header = ({ activeTab, setActiveTab }) => {
            const tabs = [
                { id: 'pdf', icon: 'fa-file-pdf', label: 'PDF Tools' },
                { id: 'image', icon: 'fa-image', label: 'Image Tools' },
                { id: 'qr', icon: 'fa-qrcode', label: 'QR Code' },
                { id: 'ocr', icon: 'fa-eye', label: 'OCR / Text' },
                { id: 'speed', icon: 'fa-gauge-high', label: 'Speed Test' },
            ];

            return (
                <header className="bg-white shadow-sm sticky top-0 z-50 border-b border-slate-200">
                    <div className="container mx-auto px-4">
                        <div className="flex justify-between items-center py-4">
                            <div className="flex items-center space-x-2 cursor-pointer" onClick={() => setActiveTab('pdf')}>
                                <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white text-xl shadow-blue-200 shadow-lg">
                                    <i className="fa-solid fa-layer-group"></i>
                                </div>
                                <h1 className="text-2xl font-bold text-slate-800 tracking-tight">Tool<span className="text-blue-600">Swift</span></h1>
                            </div>
                        </div>
                        <nav className="flex overflow-x-auto space-x-2 pb-0 no-scrollbar">
                            {tabs.map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center space-x-2 px-4 py-3 border-b-2 font-medium whitespace-nowrap transition-all ${
                                        activeTab === tab.id 
                                        ? 'border-blue-600 text-blue-600 bg-blue-50/50' 
                                        : 'border-transparent text-slate-500 hover:text-blue-500 hover:bg-slate-50'
                                    }`}
                                >
                                    <i className={`fa-solid ${tab.icon}`}></i>
                                    <span>{tab.label}</span>
                                </button>
                            ))}
                        </nav>
                    </div>
                </header>
            );
        };

        const AdSpace = () => (
            <div className="w-full h-24 bg-slate-100 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center my-6 text-slate-400 text-xs uppercase tracking-widest">
                AdSense Space
            </div>
        );

        // --- Feature: PDF ---
        const PdfTool = () => {
            const [files, setFiles] = useState([]);
            const [processing, setProcessing] = useState(false);

            const handleFiles = (e) => setFiles([...e.target.files]);

            const mergePDFs = async () => {
                if(!files.length) return;
                setProcessing(true);
                try {
                    const pdfDoc = await PDFDocument.create();
                    for (const file of files) {
                        const buffer = await file.arrayBuffer();
                        if (file.type === 'application/pdf') {
                            const src = await PDFDocument.load(buffer);
                            const pages = await pdfDoc.copyPages(src, src.getPageIndices());
                            pages.forEach(p => pdfDoc.addPage(p));
                        } else if (file.type.includes('image')) {
                            let img = file.type === 'image/png' ? await pdfDoc.embedPng(buffer) : await pdfDoc.embedJpg(buffer);
                            const page = pdfDoc.addPage([img.width, img.height]);
                            page.drawImage(img, { x: 0, y: 0, width: img.width, height: img.height });
                        }
                    }
                    const pdfBytes = await pdfDoc.save();
                    const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = 'toolswift-merged.pdf';
                    link.click();
                } catch (err) { alert("Error: " + err.message); }
                setProcessing(false);
            };

            return (
                <div className="max-w-2xl mx-auto fade-in">
                    <div className="text-center mb-8">
                        <h2 className="text-3xl font-bold text-slate-800">PDF Tools</h2>
                        <p className="text-slate-500">Merge PDFs or convert Images to PDF instantly.</p>
                    </div>
                    <div className="bg-white p-8 rounded-2xl shadow-sm border border-slate-200">
                        <div className="relative border-2 border-dashed border-blue-100 bg-blue-50/30 rounded-xl p-10 text-center hover:bg-blue-50 transition-colors group">
                            <input type="file" multiple accept=".pdf,.jpg,.png,.jpeg" onChange={handleFiles} className="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
                            <div className="w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform">
                                <i className="fa-solid fa-cloud-arrow-up text-2xl"></i>
                            </div>
                            <p className="font-semibold text-slate-700">Click or Drop files here</p>
                            <p className="text-sm text-slate-400">Supports PDF, JPG, PNG</p>
                        </div>
                        
                        {files.length > 0 && (
                            <div className="mt-6">
                                <div className="flex justify-between text-xs font-bold text-slate-400 uppercase mb-2">
                                    <span>Files Queue</span>
                                    <span>{files.length} selected</span>
                                </div>
                                <div className="max-h-40 overflow-y-auto space-y-2 mb-4 pr-2">
                                    {files.map((f, i) => (
                                        <div key={i} className="flex items-center p-2 bg-slate-50 rounded border border-slate-100">
                                            <i className={`fa-solid ${f.type.includes('pdf') ? 'fa-file-pdf text-red-500' : 'fa-file-image text-green-500'} mr-3`}></i>
                                            <span className="text-sm truncate flex-1">{f.name}</span>
                                        </div>
                                    ))}
                                </div>
                                <button onClick={mergePDFs} disabled={processing} className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all flex justify-center items-center gap-2">
                                    {processing && <div className="loader border-t-white"></div>}
                                    {processing ? 'Processing...' : 'Merge & Download'}
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // --- Feature: Image ---
        const ImageTool = () => {
            const [img, setImg] = useState(null);
            const [file, setFile] = useState(null);
            const [settings, setSettings] = useState({ width: 0, height: 0, quality: 0.8, format: 'image/jpeg' });

            const loadImg = (e) => {
                const f = e.target.files[0];
                if (f) {
                    setFile(f);
                    const reader = new FileReader();
                    reader.onload = (ev) => {
                        const i = new Image();
                        i.onload = () => {
                            setImg(i);
                            setSettings(s => ({ ...s, width: i.width, height: i.height }));
                        };
                        i.src = ev.target.result;
                    };
                    reader.readAsDataURL(f);
                }
            };

            const process = () => {
                const canvas = document.createElement('canvas');
                canvas.width = settings.width;
                canvas.height = settings.height;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0, settings.width, settings.height);
                const url = canvas.toDataURL(settings.format, settings.quality);
                const link = document.createElement('a');
                link.download = `toolswift-edit.${settings.format.split('/')[1]}`;
                link.href = url;
                link.click();
            };

            return (
                <div className="max-w-4xl mx-auto fade-in">
                    <div className="text-center mb-8">
                        <h2 className="text-3xl font-bold text-slate-800">Image Converter</h2>
                        <p className="text-slate-500">Resize, Compress & Convert Format.</p>
                    </div>
                    
                    {!img ? (
                        <div className="bg-white p-12 rounded-2xl shadow-sm border border-slate-200 text-center relative">
                            <input type="file" accept="image/*" onChange={loadImg} className="absolute inset-0 opacity-0 cursor-pointer" />
                            <i className="fa-regular fa-images text-6xl text-blue-200 mb-4"></i>
                            <p className="text-xl font-medium text-slate-700">Select Image</p>
                        </div>
                    ) : (
                        <div className="grid md:grid-cols-2 gap-8 bg-white p-6 rounded-2xl shadow-sm border">
                            <div className="bg-slate-100 rounded-xl flex items-center justify-center p-4">
                                <img src={file && URL.createObjectURL(file)} className="max-h-64 object-contain" />
                            </div>
                            <div className="space-y-5">
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-xs font-bold text-slate-500 uppercase mb-1">Width</label>
                                        <input type="number" value={settings.width} onChange={e => setSettings({...settings, width: Number(e.target.value)})} className="w-full p-2 border rounded" />
                                    </div>
                                    <div>
                                        <label className="block text-xs font-bold text-slate-500 uppercase mb-1">Height</label>
                                        <input type="number" value={settings.height} onChange={e => setSettings({...settings, height: Number(e.target.value)})} className="w-full p-2 border rounded" />
                                    </div>
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 uppercase mb-1">Format</label>
                                    <select value={settings.format} onChange={e => setSettings({...settings, format: e.target.value})} className="w-full p-2 border rounded bg-white">
                                        <option value="image/jpeg">JPG</option>
                                        <option value="image/png">PNG</option>
                                        <option value="image/webp">WEBP</option>
                                    </select>
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 uppercase mb-1">Quality</label>
                                    <input type="range" min="0.1" max="1" step="0.1" value={settings.quality} onChange={e => setSettings({...settings, quality: Number(e.target.value)})} className="w-full" />
                                </div>
                                <button onClick={process} className="w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-700">Download Image</button>
                                <button onClick={() => setImg(null)} className="w-full text-slate-400 text-sm hover:text-slate-600">Reset</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // --- Feature: QR ---
        const QrTool = () => {
            const [text, setText] = useState('');
            const canvasRef = useRef(null);
            
            useEffect(() => {
                if(canvasRef.current) {
                    new QRious({ element: canvasRef.current, value: text || 'ToolSwift', size: 250 });
                }
            }, [text]);

            return (
                <div className="max-w-3xl mx-auto fade-in">
                    <div className="text-center mb-8">
                        <h2 className="text-3xl font-bold text-slate-800">QR Generator</h2>
                        <p className="text-slate-500">Create QR Codes for Links, Text, or Wi-Fi.</p>
                    </div>
                    <div className="bg-white p-8 rounded-2xl shadow-sm border border-slate-200 grid md:grid-cols-2 gap-8 items-center">
                        <div className="space-y-4">
                            <label className="block text-sm font-bold text-slate-700">Enter Content</label>
                            <textarea 
                                rows="4"
                                placeholder="https://your-website.com" 
                                className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none resize-none"
                                value={text}
                                onChange={(e) => setText(e.target.value)}
                            ></textarea>
                            <button 
                                onClick={() => {
                                    const link = document.createElement('a');
                                    link.download = 'qrcode.png';
                                    link.href = canvasRef.current.toDataURL();
                                    link.click();
                                }} 
                                className="w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-700"
                            >
                                Download PNG
                            </button>
                        </div>
                        <div className="flex justify-center bg-slate-50 p-6 rounded-xl border border-slate-100">
                            <canvas ref={canvasRef} className="bg-white shadow-lg rounded-lg"></canvas>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Feature: OCR ---
        const OcrTool = () => {
            const [img, setImg] = useState(null);
            const [text, setText] = useState('');
            const [status, setStatus] = useState('');

            const runOCR = () => {
                if (!img) return;
                setStatus('Processing...');
                Tesseract.recognize(img, 'eng', { logger: m => setStatus(m.status) })
                    .then(({ data: { text } }) => {
                        setText(text);
                        setStatus('Done!');
                    })
                    .catch(err => setStatus('Error'));
            };

            return (
                <div className="max-w-4xl mx-auto fade-in">
                    <div className="text-center mb-8">
                        <h2 className="text-3xl font-bold text-slate-800">Image to Text (OCR)</h2>
                        <p className="text-slate-500">Extract text from scanned documents or photos.</p>
                    </div>
                    <div className="grid md:grid-cols-2 gap-6">
                        <div className="bg-white p-6 rounded-2xl shadow-sm border">
                            <input type="file" onChange={(e) => e.target.files[0] && setImg(URL.createObjectURL(e.target.files[0]))} className="mb-4 w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
                            {img && <img src={img} className="w-full rounded-lg border mb-4 max-h-64 object-contain" />}
                            <button onClick={runOCR} disabled={!img || status === 'Processing...'} className="w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-700 disabled:opacity-50">
                                {status === 'Processing...' ? 'Scanning...' : 'Extract Text'}
                            </button>
                            {status && <p className="text-center text-xs text-slate-400 mt-2 uppercase tracking-widest">{status}</p>}
                        </div>
                        <div className="bg-slate-800 p-6 rounded-2xl shadow-inner relative text-slate-300 font-mono text-sm h-80 overflow-y-auto">
                            {text || "Text results will appear here..."}
                            {text && <button onClick={() => navigator.clipboard.writeText(text)} className="absolute top-4 right-4 bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded text-xs text-white">Copy</button>}
                        </div>
                    </div>
                </div>
            );
        };

        // --- Feature: Speed ---
        const SpeedTool = () => {
            const [speed, setSpeed] = useState(0);
            const [loading, setLoading] = useState(false);

            const checkSpeed = async () => {
                setLoading(true);
                setSpeed(0);
                const start = Date.now();
                try {
                    // Using a large dummy image from Unsplash
                    const response = await fetch("https://source.unsplash.com/random/4000x4000?" + Math.random());
                    const blob = await response.blob();
                    const end = Date.now();
                    const duration = (end - start) / 1000;
                    const bits = blob.size * 8;
                    const mbps = (bits / duration / 1024 / 1024).toFixed(2);
                    setSpeed(mbps);
                } catch { setSpeed('Error'); }
                setLoading(false);
            };

            return (
                <div className="max-w-lg mx-auto text-center fade-in">
                    <div className="mb-8">
                        <h2 className="text-3xl font-bold text-slate-800">Speed Test</h2>
                        <p className="text-slate-500">Check your internet download speed.</p>
                    </div>
                    <div className="bg-white rounded-full w-72 h-72 mx-auto flex flex-col items-center justify-center shadow-xl border-[12px] border-slate-50 relative mb-8">
                        <div className="text-6xl font-black text-slate-800 tracking-tighter">{speed}</div>
                        <div className="text-slate-400 font-medium mt-2">Mbps</div>
                        {loading && <div className="absolute inset-0 rounded-full border-[12px] border-blue-500 border-t-transparent animate-spin"></div>}
                    </div>
                    <button onClick={checkSpeed} disabled={loading} className="bg-blue-600 hover:bg-blue-700 text-white text-lg font-bold py-4 px-12 rounded-full shadow-lg shadow-blue-200 transition-transform transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:scale-100">
                        {loading ? 'Testing...' : 'Start Test'}
                    </button>
                </div>
            );
        };

        // --- App Root ---
        const App = () => {
            const [activeTab, setActiveTab] = useState('pdf');

            return (
                <div className="min-h-screen flex flex-col">
                    <Header activeTab={activeTab} setActiveTab={setActiveTab} />
                    <main className="flex-grow container mx-auto px-4 py-8">
                        <AdSpace />
                        {activeTab === 'pdf' && <PdfTool />}
                        {activeTab === 'image' && <ImageTool />}
                        {activeTab === 'qr' && <QrTool />}
                        {activeTab === 'ocr' && <OcrTool />}
                        {activeTab === 'speed' && <SpeedTool />}
                        <AdSpace />
                    </main>
                    <footer className="bg-slate-900 text-slate-400 py-12 text-center text-sm">
                        <p>&copy; 2025 ToolSwift. All operations are client-side secure.</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
