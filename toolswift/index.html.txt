<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free online tools: PDF Converter, Image Resizer, QR Code Generator, OCR Text Extractor, and Internet Speed Test. No login required. Fast and secure.">
    <meta name="keywords" content="pdf converter, image resizer, qr code generator, speed test, ocr, free online tools, toolswift">
    <title>ToolSwift - All-in-One Free Web Utilities</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Libraries -->
    <!-- PDF Lib -->
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <!-- QR Code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <!-- Tesseract (OCR) -->
    <script src="https://unpkg.com/tesseract.js@v2.1.0/dist/tesseract.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #2563eb; }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { PDFDocument } = PDFLib;

        // --- Components ---

        const Header = ({ activeTab, setActiveTab }) => {
            const tabs = [
                { id: 'pdf', icon: 'fa-file-pdf', label: 'PDF Tools' },
                { id: 'image', icon: 'fa-image', label: 'Image Tools' },
                { id: 'qr', icon: 'fa-qrcode', label: 'QR Generator' },
                { id: 'ocr', icon: 'fa-eye', label: 'OCR / Text' },
                { id: 'speed', icon: 'fa-gauge-high', label: 'Speed Test' },
            ];

            return (
                <header class="bg-white shadow-md sticky top-0 z-50">
                    <div class="container mx-auto px-4">
                        <div class="flex justify-between items-center py-4">
                            <div class="flex items-center space-x-2">
                                <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white text-xl font-bold">
                                    <i class="fa-solid fa-bolt"></i>
                                </div>
                                <h1 class="text-2xl font-bold text-slate-800 tracking-tight">Tool<span class="text-blue-600">Swift</span></h1>
                            </div>
                            <div class="hidden md:block text-sm text-slate-500">Free. Private. Instant.</div>
                        </div>
                        
                        <!-- Navigation Tabs -->
                        <nav class="flex overflow-x-auto space-x-1 pb-2 no-scrollbar">
                            {tabs.map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    class={`flex items-center space-x-2 px-4 py-3 rounded-t-lg transition-colors whitespace-nowrap border-b-2 font-medium ${
                                        activeTab === tab.id 
                                        ? 'border-blue-600 text-blue-600 bg-blue-50' 
                                        : 'border-transparent text-slate-600 hover:text-blue-500 hover:bg-slate-50'
                                    }`}
                                >
                                    <i class={`fa-solid ${tab.icon}`}></i>
                                    <span>{tab.label}</span>
                                </button>
                            ))}
                        </nav>
                    </div>
                </header>
            );
        };

        const Footer = () => (
            <footer class="bg-slate-900 text-slate-300 py-12 mt-20">
                <div class="container mx-auto px-4 grid md:grid-cols-3 gap-8">
                    <div>
                        <h3 class="text-white text-lg font-bold mb-4">ToolSwift</h3>
                        <p class="text-sm leading-relaxed">
                            We provide free, serverless utilities for your daily tasks. 
                            All processing happens in your browser, ensuring your files remain private and secure.
                        </p>
                    </div>
                    <div>
                        <h3 class="text-white text-lg font-bold mb-4">Quick Links</h3>
                        <ul class="space-y-2 text-sm">
                            <li><a href="#" class="hover:text-blue-400">Privacy Policy</a></li>
                            <li><a href="#" class="hover:text-blue-400">Terms of Service</a></li>
                            <li><a href="#" class="hover:text-blue-400">Contact Us</a></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-white text-lg font-bold mb-4">SEO Tags</h3>
                        <div class="flex flex-wrap gap-2">
                            {['PDF Converter', 'Resize Image', 'QR Code', 'OCR Online', 'Speed Test'].map(tag => (
                                <span key={tag} class="px-2 py-1 bg-slate-800 rounded text-xs text-slate-400 border border-slate-700">{tag}</span>
                            ))}
                        </div>
                    </div>
                </div>
                <div class="text-center mt-12 text-xs text-slate-500">
                    &copy; 2024 ToolSwift. All rights reserved.
                </div>
            </footer>
        );

        const AdSpace = ({ position }) => (
            <div class={`bg-slate-100 border-2 border-dashed border-slate-300 rounded-lg flex items-center justify-center text-slate-400 text-sm my-6 ${position === 'sidebar' ? 'h-64 w-full' : 'h-24 w-full'}`}>
                <div class="text-center">
                    <p class="font-bold">Advertisement Space</p>
                    <p class="text-xs">Google AdSense / Sponsor</p>
                </div>
            </div>
        );

        // --- Feature 1: PDF Tools (Merge / Images to PDF) ---
        const PdfTool = () => {
            const [files, setFiles] = useState([]);
            const [processing, setProcessing] = useState(false);

            const handleFileChange = (e) => {
                setFiles([...e.target.files]);
            };

            const convertToPdf = async () => {
                if (files.length === 0) return;
                setProcessing(true);
                try {
                    const pdfDoc = await PDFDocument.create();
                    
                    for (const file of files) {
                        const fileBuffer = await file.arrayBuffer();
                        if (file.type === 'application/pdf') {
                            const srcDoc = await PDFDocument.load(fileBuffer);
                            const copiedPages = await pdfDoc.copyPages(srcDoc, srcDoc.getPageIndices());
                            copiedPages.forEach((page) => pdfDoc.addPage(page));
                        } else if (file.type.startsWith('image/')) {
                            let image;
                            if (file.type === 'image/jpeg') image = await pdfDoc.embedJpg(fileBuffer);
                            else if (file.type === 'image/png') image = await pdfDoc.embedPng(fileBuffer);
                            
                            if (image) {
                                const page = pdfDoc.addPage([image.width, image.height]);
                                page.drawImage(image, {
                                    x: 0,
                                    y: 0,
                                    width: image.width,
                                    height: image.height,
                                });
                            }
                        }
                    }
                    
                    const pdfBytes = await pdfDoc.save();
                    const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = 'toolswift-merged.pdf';
                    link.click();
                } catch (err) {
                    alert('Error processing files: ' + err.message);
                } finally {
                    setProcessing(false);
                }
            };

            return (
                <div class="max-w-3xl mx-auto">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-slate-800">PDF Merger & Converter</h2>
                        <p class="text-slate-600 mt-2">Combine multiple PDFs or convert Images (JPG/PNG) into a single PDF file.</p>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-8">
                        <div class="border-2 border-dashed border-blue-200 rounded-lg p-8 text-center hover:bg-blue-50 transition-colors relative">
                            <input type="file" multiple accept=".pdf, .jpg, .jpeg, .png" onChange={handleFileChange} class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
                            <div class="text-blue-500 text-4xl mb-4"><i class="fa-solid fa-cloud-arrow-up"></i></div>
                            <p class="text-lg font-medium text-slate-700">Drop PDFs or Images here</p>
                            <p class="text-sm text-slate-400 mt-1">or click to browse</p>
                        </div>

                        {files.length > 0 && (
                            <div class="mt-6">
                                <h4 class="font-bold text-sm text-slate-500 uppercase mb-3">Selected Files ({files.length})</h4>
                                <ul class="space-y-2 mb-6 max-h-48 overflow-y-auto">
                                    {files.map((f, i) => (
                                        <li key={i} class="flex items-center bg-slate-50 p-2 rounded text-sm border border-slate-100">
                                            <i class={`fa-solid ${f.type === 'application/pdf' ? 'fa-file-pdf text-red-500' : 'fa-file-image text-green-500'} mr-3`}></i>
                                            <span class="truncate flex-1">{f.name}</span>
                                            <span class="text-xs text-slate-400">{(f.size/1024).toFixed(1)} KB</span>
                                        </li>
                                    ))}
                                </ul>
                                <button 
                                    onClick={convertToPdf}
                                    disabled={processing}
                                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2"
                                >
                                    {processing ? <div class="loader border-t-white w-5 h-5"></div> : <i class="fa-solid fa-gears"></i>}
                                    <span>{processing ? 'Processing...' : 'Merge & Download PDF'}</span>
                                </button>
                            </div>
                        )}
                    </div>
                    
                    <AdSpace position="bottom" />
                    
                    <div class="mt-8 prose prose-slate max-w-none">
                        <h3 class="text-lg font-bold">How to use PDF Tools</h3>
                        <p class="text-sm text-slate-600">
                            Our free online PDF tool allows you to merge multiple PDF documents into one, or convert your image files (JPG, PNG) into a professional PDF document. 
                            Everything happens in your browser, meaning your sensitive documents never leave your computer. 
                            Perfect for consolidating receipts, creating portfolios, or organizing scanned documents.
                        </p>
                    </div>
                </div>
            );
        };

        // --- Feature 2: Image Tools (Resize / Convert) ---
        const ImageTool = () => {
            const [image, setImage] = useState(null); // Data URL
            const [originalFile, setOriginalFile] = useState(null);
            const [width, setWidth] = useState(0);
            const [height, setHeight] = useState(0);
            const [format, setFormat] = useState('image/jpeg');
            const [quality, setQuality] = useState(0.9);

            const handleImageLoad = (e) => {
                const file = e.target.files[0];
                if (file) {
                    setOriginalFile(file);
                    const reader = new FileReader();
                    reader.onload = (ev) => {
                        const img = new Image();
                        img.onload = () => {
                            setImage(img);
                            setWidth(img.width);
                            setHeight(img.height);
                        };
                        img.src = ev.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            };

            const processImage = () => {
                if (!image) return;
                const canvas = document.createElement('canvas');
                canvas.width = width;
                canvas.height = height;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(image, 0, 0, width, height);
                
                const dataUrl = canvas.toDataURL(format, parseFloat(quality));
                const link = document.createElement('a');
                link.download = `processed-image.${format.split('/')[1]}`;
                link.href = dataUrl;
                link.click();
            };

            return (
                <div class="max-w-3xl mx-auto">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-slate-800">Image Resizer & Converter</h2>
                        <p class="text-slate-600 mt-2">Resize images and convert between JPG, PNG, and WEBP formats.</p>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-8">
                        {!image ? (
                            <div class="border-2 border-dashed border-blue-200 rounded-lg p-12 text-center hover:bg-blue-50 transition-colors relative">
                                <input type="file" accept="image/*" onChange={handleImageLoad} class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
                                <div class="text-blue-500 text-4xl mb-4"><i class="fa-solid fa-image"></i></div>
                                <p class="text-lg font-medium text-slate-700">Upload an Image</p>
                            </div>
                        ) : (
                            <div class="grid md:grid-cols-2 gap-8">
                                <div class="flex flex-col items-center justify-center bg-slate-50 p-4 rounded border">
                                    <img src={originalFile ? URL.createObjectURL(originalFile) : ''} class="max-h-64 object-contain" />
                                    <p class="text-xs text-slate-500 mt-2">Original: {originalFile?.name}</p>
                                </div>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-bold text-slate-700 mb-1">Dimensions</label>
                                        <div class="flex space-x-2">
                                            <input type="number" value={width} onChange={(e) => setWidth(Number(e.target.value))} class="w-full p-2 border rounded" placeholder="Width" />
                                            <span class="self-center text-slate-400">x</span>
                                            <input type="number" value={height} onChange={(e) => setHeight(Number(e.target.value))} class="w-full p-2 border rounded" placeholder="Height" />
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-bold text-slate-700 mb-1">Format</label>
                                        <select value={format} onChange={(e) => setFormat(e.target.value)} class="w-full p-2 border rounded bg-white">
                                            <option value="image/jpeg">JPEG</option>
                                            <option value="image/png">PNG</option>
                                            <option value="image/webp">WEBP</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-bold text-slate-700 mb-1">Quality ({Math.round(quality * 100)}%)</label>
                                        <input type="range" min="0.1" max="1" step="0.1" value={quality} onChange={(e) => setQuality(e.target.value)} class="w-full" />
                                    </div>
                                    <button onClick={processImage} class="w-full bg-blue-600 text-white font-bold py-3 rounded hover:bg-blue-700 transition">Download Processed Image</button>
                                    <button onClick={() => setImage(null)} class="w-full text-slate-500 text-sm underline">Start Over</button>
                                </div>
                            </div>
                        )}
                    </div>
                    <AdSpace position="bottom" />
                </div>
            );
        };

        // --- Feature 3: QR Generator ---
        const QrTool = () => {
            const [text, setText] = useState('');
            const [size, setSize] = useState(200);
            const canvasRef = useRef(null);

            useEffect(() => {
                if (canvasRef.current) {
                    new QRious({
                        element: canvasRef.current,
                        value: text || 'https://toolswift.com',
                        size: size,
                        level: 'H'
                    });
                }
            }, [text, size]);

            const downloadQr = () => {
                const link = document.createElement('a');
                link.download = 'qrcode.png';
                link.href = canvasRef.current.toDataURL();
                link.click();
            };

            return (
                <div class="max-w-3xl mx-auto">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-slate-800">QR Code Generator</h2>
                        <p class="text-slate-600 mt-2">Create instant QR codes for URLs, Wi-Fi, text, or vCards.</p>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-8 grid md:grid-cols-2 gap-8">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-bold text-slate-700 mb-1">Content / URL</label>
                                <input 
                                    type="text" 
                                    value={text} 
                                    onChange={(e) => setText(e.target.value)} 
                                    placeholder="https://example.com" 
                                    class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                />
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-700 mb-1">Size ({size}px)</label>
                                <input type="range" min="100" max="500" value={size} onChange={(e) => setSize(Number(e.target.value))} class="w-full" />
                            </div>
                            <button onClick={downloadQr} class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition">
                                <i class="fa-solid fa-download mr-2"></i> Download PNG
                            </button>
                        </div>
                        <div class="flex items-center justify-center bg-slate-50 rounded-lg border border-slate-100">
                            <canvas ref={canvasRef} class="shadow-lg bg-white p-2 rounded"></canvas>
                        </div>
                    </div>
                    <AdSpace position="bottom" />
                </div>
            );
        };

        // --- Feature 4: OCR Tool ---
        const OcrTool = () => {
            const [image, setImage] = useState(null);
            const [text, setText] = useState('');
            const [progress, setProgress] = useState(0);
            const [isWorking, setIsWorking] = useState(false);

            const handleOcr = () => {
                if (!image) return;
                setIsWorking(true);
                setText('');
                Tesseract.recognize(
                    image,
                    'eng',
                    { logger: m => {
                        if(m.status === 'recognizing text') setProgress(Math.round(m.progress * 100));
                    }}
                ).then(({ data: { text } }) => {
                    setText(text);
                    setIsWorking(false);
                }).catch(err => {
                    alert(err);
                    setIsWorking(false);
                });
            };

            const handleImage = (e) => {
                if(e.target.files && e.target.files[0]) {
                    setImage(URL.createObjectURL(e.target.files[0]));
                    setText('');
                    setProgress(0);
                }
            };

            return (
                <div class="max-w-4xl mx-auto">
                     <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-slate-800">Image to Text (OCR)</h2>
                        <p class="text-slate-600 mt-2">Extract text from images or scanned PDFs instantly.</p>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-xl border shadow-sm">
                            <input type="file" accept="image/*" onChange={handleImage} class="mb-4 block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"/>
                            {image && <img src={image} class="max-h-64 mx-auto border rounded" />}
                            <button 
                                onClick={handleOcr} 
                                disabled={!image || isWorking}
                                class={`mt-4 w-full py-3 rounded font-bold text-white ${!image || isWorking ? 'bg-slate-400' : 'bg-blue-600 hover:bg-blue-700'}`}
                            >
                                {isWorking ? `Extracting ${progress}%` : 'Extract Text'}
                            </button>
                        </div>
                        <div class="bg-slate-50 p-6 rounded-xl border shadow-inner relative min-h-[300px]">
                            {text ? (
                                <textarea readonly class="w-full h-full bg-transparent border-none focus:ring-0 resize-none text-sm font-mono text-slate-700" value={text}></textarea>
                            ) : (
                                <div class="absolute inset-0 flex items-center justify-center text-slate-400 text-sm">
                                    Extracted text will appear here...
                                </div>
                            )}
                            {text && (
                                <button 
                                    onClick={() => navigator.clipboard.writeText(text)}
                                    class="absolute bottom-4 right-4 bg-white border shadow-sm px-3 py-1 text-xs rounded hover:bg-slate-100"
                                >
                                    Copy Text
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // --- Feature 5: Speed Test ---
        const SpeedTool = () => {
            const [speed, setSpeed] = useState(0);
            const [status, setStatus] = useState('idle'); // idle, testing, done

            const runSpeedTest = async () => {
                setStatus('testing');
                setSpeed(0);
                
                // We'll download a dummy image from a fast CDN (Unsplash source) 
                // Approx 5MB file
                const imageAddr = "https://source.unsplash.com/random/4000x4000?" + (new Date()).getTime(); 
                const downloadSize = 5000000; // Estimate ~5MB
                const startTime = (new Date()).getTime();
                const cacheBuster = "?nnn=" + startTime;

                try {
                    // Simulate download (Fetch blob)
                    const response = await fetch(imageAddr + cacheBuster);
                    const blob = await response.blob(); // Read data
                    const endTime = (new Date()).getTime();
                    const duration = (endTime - startTime) / 1000; // Seconds
                    
                    // Calculate bits per second
                    // Note: This is a rough estimation
                    const bitsLoaded = blob.size * 8;
                    const speedBps = bitsLoaded / duration;
                    const speedMbps = (speedBps / 1024 / 1024).toFixed(2);
                    
                    setSpeed(speedMbps);
                    setStatus('done');
                } catch (e) {
                    setStatus('error');
                }
            };

            return (
                <div class="max-w-xl mx-auto text-center">
                    <div class="mb-8">
                        <h2 class="text-3xl font-bold text-slate-800">Internet Speed Test</h2>
                        <p class="text-slate-600 mt-2">Check your current download speed instantly.</p>
                    </div>

                    <div class="bg-white rounded-full w-64 h-64 mx-auto flex flex-col items-center justify-center shadow-lg border-8 border-blue-50 relative overflow-hidden mb-8">
                        {status === 'testing' && <div class="absolute inset-0 border-8 border-blue-500 border-t-transparent rounded-full animate-spin"></div>}
                        
                        <div class="z-10">
                            <span class="text-5xl font-black text-slate-800">{speed}</span>
                            <span class="block text-slate-500 font-medium mt-2">Mbps</span>
                        </div>
                    </div>

                    <button 
                        onClick={runSpeedTest} 
                        disabled={status === 'testing'}
                        class="bg-blue-600 hover:bg-blue-700 text-white text-lg font-bold py-4 px-12 rounded-full shadow-lg transition-transform transform hover:scale-105 disabled:opacity-50 disabled:scale-100"
                    >
                        {status === 'testing' ? 'Testing...' : 'Start Speed Test'}
                    </button>

                    {status === 'done' && (
                        <p class="mt-6 text-slate-500 text-sm">
                            Test complete. This result is an estimate based on downloading a large image file from a global CDN.
                        </p>
                    )}
                    <AdSpace position="bottom" />
                </div>
            );
        };

        // --- Main Layout ---
        const App = () => {
            const [activeTab, setActiveTab] = useState('pdf');

            return (
                <div class="min-h-screen bg-slate-50 flex flex-col">
                    <Header activeTab={activeTab} setActiveTab={setActiveTab} />
                    
                    <main class="flex-grow container mx-auto px-4 py-8">
                        {/* Top Ad Unit */}
                        <AdSpace position="top" />

                        <div class="animate-fade-in">
                            {activeTab === 'pdf' && <PdfTool />}
                            {activeTab === 'image' && <ImageTool />}
                            {activeTab === 'qr' && <QrTool />}
                            {activeTab === 'ocr' && <OcrTool />}
                            {activeTab === 'speed' && <SpeedTool />}
                        </div>
                    </main>
                    
                    <Footer />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>